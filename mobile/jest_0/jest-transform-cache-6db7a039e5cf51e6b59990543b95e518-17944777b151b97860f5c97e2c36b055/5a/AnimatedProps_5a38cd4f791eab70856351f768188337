c82a3c376cde8c8b527c2888122305b3
'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _require=require('../AnimatedEvent'),AnimatedEvent=_require.AnimatedEvent;var AnimatedNode=require('./AnimatedNode');var AnimatedStyle=require('./AnimatedStyle');var NativeAnimatedHelper=require('../NativeAnimatedHelper');var ReactNative=require('ReactNative');var invariant=require('fbjs/lib/invariant');var AnimatedProps=function(_AnimatedNode){_inherits(AnimatedProps,_AnimatedNode);function AnimatedProps(props,callback){_classCallCheck(this,AnimatedProps);var _this=_possibleConstructorReturn(this,(AnimatedProps.__proto__||Object.getPrototypeOf(AnimatedProps)).call(this));if(props.style){props=_extends({},props,{style:new AnimatedStyle(props.style)});}_this._props=props;_this._callback=callback;_this.__attach();return _this;}_createClass(AnimatedProps,[{key:'__getValue',value:function __getValue(){var props={};for(var key in this._props){var value=this._props[key];if(value instanceof AnimatedNode){if(!value.__isNative||value instanceof AnimatedStyle){props[key]=value.__getValue();}}else if(value instanceof AnimatedEvent){props[key]=value.__getHandler();}else{props[key]=value;}}return props;}},{key:'__getAnimatedValue',value:function __getAnimatedValue(){var props={};for(var key in this._props){var value=this._props[key];if(value instanceof AnimatedNode){props[key]=value.__getAnimatedValue();}}return props;}},{key:'__attach',value:function __attach(){for(var key in this._props){var value=this._props[key];if(value instanceof AnimatedNode){value.__addChild(this);}}}},{key:'__detach',value:function __detach(){if(this.__isNative&&this._animatedView){this.__disconnectAnimatedView();}for(var key in this._props){var value=this._props[key];if(value instanceof AnimatedNode){value.__removeChild(this);}}_get(AnimatedProps.prototype.__proto__||Object.getPrototypeOf(AnimatedProps.prototype),'__detach',this).call(this);}},{key:'update',value:function update(){this._callback();}},{key:'__makeNative',value:function __makeNative(){if(!this.__isNative){this.__isNative=true;for(var key in this._props){var value=this._props[key];if(value instanceof AnimatedNode){value.__makeNative();}}if(this._animatedView){this.__connectAnimatedView();}}}},{key:'setNativeView',value:function setNativeView(animatedView){if(this._animatedView===animatedView){return;}this._animatedView=animatedView;if(this.__isNative){this.__connectAnimatedView();}}},{key:'__connectAnimatedView',value:function __connectAnimatedView(){invariant(this.__isNative,'Expected node to be marked as "native"');var nativeViewTag=ReactNative.findNodeHandle(this._animatedView);invariant(nativeViewTag!=null,'Unable to locate attached view in the native tree');NativeAnimatedHelper.API.connectAnimatedNodeToView(this.__getNativeTag(),nativeViewTag);}},{key:'__disconnectAnimatedView',value:function __disconnectAnimatedView(){invariant(this.__isNative,'Expected node to be marked as "native"');var nativeViewTag=ReactNative.findNodeHandle(this._animatedView);invariant(nativeViewTag!=null,'Unable to locate attached view in the native tree');NativeAnimatedHelper.API.disconnectAnimatedNodeFromView(this.__getNativeTag(),nativeViewTag);}},{key:'__getNativeConfig',value:function __getNativeConfig(){var propsConfig={};for(var propKey in this._props){var value=this._props[propKey];if(value instanceof AnimatedNode){propsConfig[propKey]=value.__getNativeTag();}}return{type:'props',props:propsConfig};}}]);return AnimatedProps;}(AnimatedNode);module.exports=AnimatedProps;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuaW1hdGVkUHJvcHMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsIkFuaW1hdGVkRXZlbnQiLCJBbmltYXRlZE5vZGUiLCJBbmltYXRlZFN0eWxlIiwiTmF0aXZlQW5pbWF0ZWRIZWxwZXIiLCJSZWFjdE5hdGl2ZSIsImludmFyaWFudCIsIkFuaW1hdGVkUHJvcHMiLCJwcm9wcyIsImNhbGxiYWNrIiwic3R5bGUiLCJfcHJvcHMiLCJfY2FsbGJhY2siLCJfX2F0dGFjaCIsImtleSIsInZhbHVlIiwiX19pc05hdGl2ZSIsIl9fZ2V0VmFsdWUiLCJfX2dldEhhbmRsZXIiLCJfX2dldEFuaW1hdGVkVmFsdWUiLCJfX2FkZENoaWxkIiwiX2FuaW1hdGVkVmlldyIsIl9fZGlzY29ubmVjdEFuaW1hdGVkVmlldyIsIl9fcmVtb3ZlQ2hpbGQiLCJfX21ha2VOYXRpdmUiLCJfX2Nvbm5lY3RBbmltYXRlZFZpZXciLCJhbmltYXRlZFZpZXciLCJuYXRpdmVWaWV3VGFnIiwiZmluZE5vZGVIYW5kbGUiLCJBUEkiLCJjb25uZWN0QW5pbWF0ZWROb2RlVG9WaWV3IiwiX19nZXROYXRpdmVUYWciLCJkaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXciLCJwcm9wc0NvbmZpZyIsInByb3BLZXkiLCJ0eXBlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBVUEsYSx5OERBRXdCQSxRQUFRLGtCQUFSLEMsQ0FBakJDLGEsVUFBQUEsYSxDQUNQLEdBQU1DLGNBQWVGLFFBQVEsZ0JBQVIsQ0FBckIsQ0FDQSxHQUFNRyxlQUFnQkgsUUFBUSxpQkFBUixDQUF0QixDQUNBLEdBQU1JLHNCQUF1QkosUUFBUSx5QkFBUixDQUE3QixDQUNBLEdBQU1LLGFBQWNMLE9BQWQsZUFBTixDQUVBLEdBQU1NLFdBQVlOLE9BQVosc0JBQU4sQyxHQUVNTyxjLGdFQUtKLHVCQUFZQyxLQUFaLENBQTJCQyxRQUEzQixDQUFpRCwySkFFL0MsR0FBSUQsTUFBTUUsS0FBVixDQUFpQixD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LEVBSUF2QixxQkFBcUJ5QixHQUFyQixDQUF5QkMseUJBQXpCLENBQ0UsS0FBS0MsY0FBTCxFQURGLENBRUVKLGFBRkYsRUFJRCxDLDJFQUVnQyxDQUMvQnJCLFVBQVUsS0FBS1UsVUFBZixDQUEyQix3Q0FBM0IsRUFDQSxHQUFNVyxlQUF5QnRCLFlBQVl1QixjQUFaLENBQzdCLEtBQUtQLGFBRHdCLENBQS9CLENBR0FmLFVBQ0VxQixlQUFpQixJQURuQixDQUVFLG1EQUZGLEVBSUF2QixxQkFBcUJ5QixHQUFyQixDQUF5QkcsOEJBQXpCLENBQ0UsS0FBS0QsY0FBTCxFQURGLENBRUVKLGFBRkYsRUFJRCxDLDZEQUUyQixDQUMxQixHQUFNTSxhQUFjLEVBQXBCLENBQ0EsSUFBSyxHQUFNQyxRQUFYLEdBQXNCLE1BQUt2QixNQUEzQixDQUFtQyxDQUNqQyxHQUFNSSxPQUFRLEtBQUtKLE1BQUwsQ0FBWXVCLE9BQVosQ0FBZCxDQUNBLEdBQUluQixnQkFBaUJiLGFBQXJCLENBQW1DLENBQ2pDK0IsWUFBWUMsT0FBWixFQUF1Qm5CLE1BQU1nQixjQUFOLEVBQXZCLENBQ0QsQ0FDRixDQUNELE1BQU8sQ0FDTEksS0FBTSxPQURELENBRUwzQixNQUFPeUIsV0FGRixDQUFQLENBSUQsQywyQkE3SXlCL0IsWSxFQWdKNUJrQyxPQUFPQyxPQUFQLENBQWlCOUIsYUFBakIiLCJmaWxlIjoiQW5pbWF0ZWRQcm9wcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEFuaW1hdGVkUHJvcHNcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuY29uc3Qge0FuaW1hdGVkRXZlbnR9ID0gcmVxdWlyZSgnLi4vQW5pbWF0ZWRFdmVudCcpO1xuY29uc3QgQW5pbWF0ZWROb2RlID0gcmVxdWlyZSgnLi9BbmltYXRlZE5vZGUnKTtcbmNvbnN0IEFuaW1hdGVkU3R5bGUgPSByZXF1aXJlKCcuL0FuaW1hdGVkU3R5bGUnKTtcbmNvbnN0IE5hdGl2ZUFuaW1hdGVkSGVscGVyID0gcmVxdWlyZSgnLi4vTmF0aXZlQW5pbWF0ZWRIZWxwZXInKTtcbmNvbnN0IFJlYWN0TmF0aXZlID0gcmVxdWlyZSgnUmVhY3ROYXRpdmUnKTtcblxuY29uc3QgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbmNsYXNzIEFuaW1hdGVkUHJvcHMgZXh0ZW5kcyBBbmltYXRlZE5vZGUge1xuICBfcHJvcHM6IE9iamVjdDtcbiAgX2FuaW1hdGVkVmlldzogYW55O1xuICBfY2FsbGJhY2s6ICgpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IE9iamVjdCwgY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcbiAgICBzdXBlcigpO1xuICAgIGlmIChwcm9wcy5zdHlsZSkge1xuICAgICAgcHJvcHMgPSB7XG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBzdHlsZTogbmV3IEFuaW1hdGVkU3R5bGUocHJvcHMuc3R5bGUpLFxuICAgICAgfTtcbiAgICB9XG4gICAgdGhpcy5fcHJvcHMgPSBwcm9wcztcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuX19hdHRhY2goKTtcbiAgfVxuXG4gIF9fZ2V0VmFsdWUoKTogT2JqZWN0IHtcbiAgICBjb25zdCBwcm9wcyA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX3Byb3BzKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuX3Byb3BzW2tleV07XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZE5vZGUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZS5fX2lzTmF0aXZlIHx8IHZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWRTdHlsZSkge1xuICAgICAgICAgIC8vIFdlIGNhbm5vdCB1c2UgdmFsdWUgb2YgbmF0aXZlbHkgZHJpdmVuIG5vZGVzIHRoaXMgd2F5IGFzIHRoZSB2YWx1ZSB3ZSBoYXZlIGFjY2VzcyBmcm9tXG4gICAgICAgICAgLy8gSlMgbWF5IG5vdCBiZSB1cCB0byBkYXRlLlxuICAgICAgICAgIHByb3BzW2tleV0gPSB2YWx1ZS5fX2dldFZhbHVlKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZEV2ZW50KSB7XG4gICAgICAgIHByb3BzW2tleV0gPSB2YWx1ZS5fX2dldEhhbmRsZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb3BzW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHByb3BzO1xuICB9XG5cbiAgX19nZXRBbmltYXRlZFZhbHVlKCk6IE9iamVjdCB7XG4gICAgY29uc3QgcHJvcHMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLl9wcm9wc1trZXldO1xuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWROb2RlKSB7XG4gICAgICAgIHByb3BzW2tleV0gPSB2YWx1ZS5fX2dldEFuaW1hdGVkVmFsdWUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHByb3BzO1xuICB9XG5cbiAgX19hdHRhY2goKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5fcHJvcHMpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fcHJvcHNba2V5XTtcbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgICB2YWx1ZS5fX2FkZENoaWxkKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9fZGV0YWNoKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9faXNOYXRpdmUgJiYgdGhpcy5fYW5pbWF0ZWRWaWV3KSB7XG4gICAgICB0aGlzLl9fZGlzY29ubmVjdEFuaW1hdGVkVmlldygpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLl9wcm9wc1trZXldO1xuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWROb2RlKSB7XG4gICAgICAgIHZhbHVlLl9fcmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICAgIHN1cGVyLl9fZGV0YWNoKCk7XG4gIH1cblxuICB1cGRhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5fY2FsbGJhY2soKTtcbiAgfVxuXG4gIF9fbWFrZU5hdGl2ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgdGhpcy5fX2lzTmF0aXZlID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX3Byb3BzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fcHJvcHNba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWROb2RlKSB7XG4gICAgICAgICAgdmFsdWUuX19tYWtlTmF0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9hbmltYXRlZFZpZXcpIHtcbiAgICAgICAgdGhpcy5fX2Nvbm5lY3RBbmltYXRlZFZpZXcoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXROYXRpdmVWaWV3KGFuaW1hdGVkVmlldzogYW55KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FuaW1hdGVkVmlldyA9PT0gYW5pbWF0ZWRWaWV3KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2FuaW1hdGVkVmlldyA9IGFuaW1hdGVkVmlldztcbiAgICBpZiAodGhpcy5fX2lzTmF0aXZlKSB7XG4gICAgICB0aGlzLl9fY29ubmVjdEFuaW1hdGVkVmlldygpO1xuICAgIH1cbiAgfVxuXG4gIF9fY29ubmVjdEFuaW1hdGVkVmlldygpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQodGhpcy5fX2lzTmF0aXZlLCAnRXhwZWN0ZWQgbm9kZSB0byBiZSBtYXJrZWQgYXMgXCJuYXRpdmVcIicpO1xuICAgIGNvbnN0IG5hdGl2ZVZpZXdUYWc6ID9udW1iZXIgPSBSZWFjdE5hdGl2ZS5maW5kTm9kZUhhbmRsZShcbiAgICAgIHRoaXMuX2FuaW1hdGVkVmlldyxcbiAgICApO1xuICAgIGludmFyaWFudChcbiAgICAgIG5hdGl2ZVZpZXdUYWcgIT0gbnVsbCxcbiAgICAgICdVbmFibGUgdG8gbG9jYXRlIGF0dGFjaGVkIHZpZXcgaW4gdGhlIG5hdGl2ZSB0cmVlJyxcbiAgICApO1xuICAgIE5hdGl2ZUFuaW1hdGVkSGVscGVyLkFQSS5jb25uZWN0QW5pbWF0ZWROb2RlVG9WaWV3KFxuICAgICAgdGhpcy5fX2dldE5hdGl2ZVRhZygpLFxuICAgICAgbmF0aXZlVmlld1RhZyxcbiAgICApO1xuICB9XG5cbiAgX19kaXNjb25uZWN0QW5pbWF0ZWRWaWV3KCk6IHZvaWQge1xuICAgIGludmFyaWFudCh0aGlzLl9faXNOYXRpdmUsICdFeHBlY3RlZCBub2RlIHRvIGJlIG1hcmtlZCBhcyBcIm5hdGl2ZVwiJyk7XG4gICAgY29uc3QgbmF0aXZlVmlld1RhZzogP251bWJlciA9IFJlYWN0TmF0aXZlLmZpbmROb2RlSGFuZGxlKFxuICAgICAgdGhpcy5fYW5pbWF0ZWRWaWV3LFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgbmF0aXZlVmlld1RhZyAhPSBudWxsLFxuICAgICAgJ1VuYWJsZSB0byBsb2NhdGUgYXR0YWNoZWQgdmlldyBpbiB0aGUgbmF0aXZlIHRyZWUnLFxuICAgICk7XG4gICAgTmF0aXZlQW5pbWF0ZWRIZWxwZXIuQVBJLmRpc2Nvbm5lY3RBbmltYXRlZE5vZGVGcm9tVmlldyhcbiAgICAgIHRoaXMuX19nZXROYXRpdmVUYWcoKSxcbiAgICAgIG5hdGl2ZVZpZXdUYWcsXG4gICAgKTtcbiAgfVxuXG4gIF9fZ2V0TmF0aXZlQ29uZmlnKCk6IE9iamVjdCB7XG4gICAgY29uc3QgcHJvcHNDb25maWcgPSB7fTtcbiAgICBmb3IgKGNvbnN0IHByb3BLZXkgaW4gdGhpcy5fcHJvcHMpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fcHJvcHNbcHJvcEtleV07XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZE5vZGUpIHtcbiAgICAgICAgcHJvcHNDb25maWdbcHJvcEtleV0gPSB2YWx1ZS5fX2dldE5hdGl2ZVRhZygpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3Byb3BzJyxcbiAgICAgIHByb3BzOiBwcm9wc0NvbmZpZyxcbiAgICB9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQW5pbWF0ZWRQcm9wcztcbiJdfQ==