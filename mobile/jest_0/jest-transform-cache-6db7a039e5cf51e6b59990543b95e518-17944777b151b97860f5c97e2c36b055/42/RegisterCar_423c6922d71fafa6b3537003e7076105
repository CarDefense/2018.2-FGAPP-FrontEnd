2edbec4c47a1bd3771f197f34c7eca3f
Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNativeMaterialTextfield=require('react-native-material-textfield');var _reactNative=require('react-native');var _jwtDecode=require('jwt-decode');var _jwtDecode2=_interopRequireDefault(_jwtDecode);var _Const=require('../const/Const');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var RegisterCar=function(_Component){_inherits(RegisterCar,_Component);function RegisterCar(props){_classCallCheck(this,RegisterCar);var _this=_possibleConstructorReturn(this,(RegisterCar.__proto__||Object.getPrototypeOf(RegisterCar)).call(this,props));_this._onRefresh=function(){_this.setState({refreshing:true});_this.componentDidMount().then(function(){_this.setState({refreshing:false});});};_this.onPressButton=function(){var errors={};var errorPlate=false;['plate'].forEach(function(text){var value=_this[text].value();if(!value){errors[text]='Campo obrigatório.';errorPlate=true;}else{if('plate'===text&&value.length<8){errors[text]='Placa inválida. Ex.:AAA-0000';errorPlate=true;}}});['plate'].forEach(function(text){var value=_this[text].value();if(!value){errors[text]='Campo obrigatório.';errorPlate=true;}else{if('plate'===text&&value.length<8){errors[text]='Placa inválida. Ex.:AAA-0000';errorPlate=true;}}});['model'].forEach(function(text){var value=_this[text].value();});['color'].forEach(function(text){var value=_this[text].value();});if(errorPlate==false){var state=_this.props.navigation.state;var token=state.params?state.params.token:undefined;user=(0,_jwtDecode2.default)(token);var url='http://cardefense.eastus.cloudapp.azure.com:8003/'+'/validate_car/';var notification=JSON.stringify({id_token:user.user_id,plate:_this.state.plate,model:_this.state.model,color:_this.state.color});console.log(notification);fetch(url,{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:notification}).then(function(response){return response.json();}).then(function(jsonResponse){console.log(jsonResponse);_reactNative.Alert.alert('Veículo cadastrado!');}).catch(function(error){console.log(error);_reactNative.Alert.alert('Erro ao cadastrar!');});}_this.setState({errors:errors});};_this.plateRef=_this.updateRef.bind(_this,'plate');_this.modelRef=_this.updateRef.bind(_this,'model');_this.colorRef=_this.updateRef.bind(_this,'color');_this.onFocus=_this.onFocus.bind(_this);_this.state={plate:'',model:'',color:'',refreshing:false};return _this;}_createClass(RegisterCar,[{key:'onFocus',value:function onFocus(){var _state$errors=this.state.errors,errors=_state$errors===undefined?{}:_state$errors;for(var text in errors){var ref=this[text];if(ref&&ref.isFocused()){delete errors[text];}}this.setState({errors:errors});}},{key:'onChangeText',value:function onChangeText(words){var _this2=this;['plate'].map(function(text){return{text:text,ref:_this2[text]};}).forEach(function(_ref){var text=_ref.text,ref=_ref.ref;if(ref&&ref.isFocused()){_this2.setState(_defineProperty({},text,words));}});['model'].map(function(text){return{text:text,ref:_this2[text]};}).forEach(function(_ref2){var text=_ref2.text,ref=_ref2.ref;if(ref&&ref.isFocused()){_this2.setState(_defineProperty({},text,words));}});['color'].map(function(text){return{text:text,ref:_this2[text]};}).forEach(function(_ref3){var text=_ref3.text,ref=_ref3.ref;if(ref&&ref.isFocused()){_this2.setState(_defineProperty({},text,words));}});}},{key:'componentDidMount',value:function componentDidMount(){var _this3=this;var state,token,link;return regeneratorRuntime.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({hasError:false,errorMessage:''});state=this.props.navigation.state;token=state.params?state.params.token:undefined;user=(0,_jwtDecode2.default)(token);link=_Const.CAR_API+'/car/?token='+user.user_id;return _context.abrupt('return',fetch(link).then(function(response){return response.json();}).then(function(responseJson){_this3.setState({isLoading:false,dataSource:responseJson},function(){});}).catch(function(error){console.error(error);}));case 6:case'end':return _context.stop();}}},null,this);}},{key:'updateRef',value:function updateRef(text,ref){this[text]=ref;}},{key:'render',value:function render(){var _this4=this;var _state=this.state,_state$errors2=_state.errors,errors=_state$errors2===undefined?{}:_state$errors2,data=_objectWithoutProperties(_state,['errors']);var _data$plate=data.plate,plate=_data$plate===undefined?'text':_data$plate;var _data$model=data.model,model=_data$model===undefined?'text':_data$model;var _data$color=data.color,color=_data$color===undefined?'text':_data$color;return _react2.default.createElement(_reactNative.ScrollView,{refreshControl:_react2.default.createElement(_reactNative.RefreshControl,{refreshing:this.state.refreshing,onRefresh:this._onRefresh})},_react2.default.createElement(_reactNative.View,{style:styles.container},_react2.default.createElement(_reactNative.Text,{style:styles.header},' Cadastro'),_react2.default.createElement(_reactNativeMaterialTextfield.TextField,{ref:this.plateRef,value:data.plate,autoCorrect:false,enablesReturnKeyAutomatically:true,onFocus:this.onFocus,onChangeText:function onChangeText(plate){return _this4.setState({plate:plate});},returnKeyType:'next',label:'Placa',tintColor:'#760f9f',underlineColorAndroid:'transparent',maxLength:8,autoCapitalize:'characters',error:errors.plate}),_react2.default.createElement(_reactNativeMaterialTextfield.TextField,{ref:this.modelRef,value:data.model,autoCorrect:false,enablesReturnKeyAutomatically:true,onFocus:this.onFocus,onChangeText:function onChangeText(model){return _this4.setState({model:model});},returnKeyType:'next',label:'Modelo',tintColor:'#760f9f'}),_react2.default.createElement(_reactNativeMaterialTextfield.TextField,{ref:this.colorRef,value:data.color,autoCorrect:false,enablesReturnKeyAutomatically:true,onFocus:this.onFocus,onChangeText:function onChangeText(color){return _this4.setState({color:color});},returnKeyType:'next',label:'Cor',tintColor:'#760f9f'})),_react2.default.createElement(_reactNative.View,{style:styles.container1},_react2.default.createElement(_reactNative.TouchableOpacity,{style:styles.button,color:'#5c68c3',onPress:this.onPressButton,containerViewStyle:{width:'40%'}},_react2.default.createElement(_reactNative.Text,{style:{color:'white'}},'Cadastrar'))),_react2.default.createElement(_reactNative.View,{style:styles.container1},_react2.default.createElement(_reactNative.FlatList,{data:this.state.dataSource,renderItem:function renderItem(_ref4){var item=_ref4.item;return _react2.default.createElement(_reactNative.View,{style:styles.item2},_react2.default.createElement(_reactNative.Text,{style:styles.text1},item.plate));},keyExtractor:function keyExtractor(_ref5,index){var id=_ref5.id;return id.toString();}})));}}]);return RegisterCar;}(_react.Component);exports.default=RegisterCar;var styles=_reactNative.StyleSheet.create({container:{paddingLeft:16,paddingRight:16},container1:{marginTop:80,flexDirection:'row',justifyContent:'center'},header:{color:'#760f9f',textAlign:'center',fontWeight:'200',fontSize:50,marginTop:25},header2:{color:'#760f9f',textAlign:'left',paddingLeft:20,paddingTop:35,fontWeight:'100',fontSize:30},button:{backgroundColor:"#760f9f",borderRadius:15,height:40,width:120,flexDirection:'row',justifyContent:'center',alignItems:'center'},item2:{alignItems:"center",backgroundColor:"#ffffff",flexGrow:1,margin:4,padding:20,shadowColor:"#000000",shadowOpacity:0.8,shadowRadius:2,shadowOffset:{height:1,width:1},elevation:4},text1:{color:"#760f9f",fontWeight:'200'}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlZ2lzdGVyQ2FyLmpzIl0sIm5hbWVzIjpbIlJlZ2lzdGVyQ2FyIiwicHJvcHMiLCJfb25SZWZyZXNoIiwic2V0U3RhdGUiLCJyZWZyZXNoaW5nIiwiY29tcG9uZW50RGlkTW91bnQiLCJ0aGVuIiwib25QcmVzc0J1dHRvbiIsImVycm9ycyIsImVycm9yUGxhdGUiLCJmb3JFYWNoIiwidGV4dCIsInZhbHVlIiwibGVuZ3RoIiwic3RhdGUiLCJuYXZpZ2F0aW9uIiwidG9rZW4iLCJwYXJhbXMiLCJ1bmRlZmluZWQiLCJ1c2VyIiwidXJsIiwibm90aWZpY2F0aW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsImlkX3Rva2VuIiwidXNlcl9pZCIsInBsYXRlIiwibW9kZWwiLCJjb2xvciIsImNvbnNvbGUiLCJsb2ciLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwicmVzcG9uc2UiLCJqc29uIiwianNvblJlc3BvbnNlIiwiQWxlcnQiLCJhbGVydCIsImNhdGNoIiwiZXJyb3IiLCJwbGF0ZVJlZiIsInVwZGF0ZVJlZiIsImJpbmQiLCJtb2RlbFJlZiIsImNvbG9yUmVmIiwib25Gb2N1cyIsInJlZiIsImlzRm9jdXNlZCIsIndvcmRzIiwibWFwIiwiaGFzRXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJsaW5rIiwiQ0FSX0FQSSIsInJlc3BvbnNlSnNvbiIsImlzTG9hZGluZyIsImRhdGFTb3VyY2UiLCJkYXRhIiwic3R5bGVzIiwiY29udGFpbmVyIiwiaGVhZGVyIiwiY29udGFpbmVyMSIsImJ1dHRvbiIsIndpZHRoIiwiaXRlbSIsIml0ZW0yIiwidGV4dDEiLCJpbmRleCIsImlkIiwidG9TdHJpbmciLCJDb21wb25lbnQiLCJTdHlsZVNoZWV0IiwiY3JlYXRlIiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJtYXJnaW5Ub3AiLCJmbGV4RGlyZWN0aW9uIiwianVzdGlmeUNvbnRlbnQiLCJ0ZXh0QWxpZ24iLCJmb250V2VpZ2h0IiwiZm9udFNpemUiLCJoZWFkZXIyIiwicGFkZGluZ1RvcCIsImJhY2tncm91bmRDb2xvciIsImJvcmRlclJhZGl1cyIsImhlaWdodCIsImFsaWduSXRlbXMiLCJmbGV4R3JvdyIsIm1hcmdpbiIsInBhZGRpbmciLCJzaGFkb3dDb2xvciIsInNoYWRvd09wYWNpdHkiLCJzaGFkb3dSYWRpdXMiLCJzaGFkb3dPZmZzZXQiLCJlbGV2YXRpb24iXSwibWFwcGluZ3MiOiJpbEJBQUEsNEIsMkNBQ0EsNkVBQ0EseUNBR0EscUMsbURBQ0EscUMsK3ZDQThDcUJBLFksd0RBRW5CLHFCQUFZQyxLQUFaLENBQW1CLG1KQUNYQSxLQURXLFNBOEVuQkMsVUE5RW1CLENBOEVOLFVBQU0sQ0FDakIsTUFBS0MsUUFBTCxDQUFjLENBQUVDLFdBQVksSUFBZCxDQUFkLEVBQ0EsTUFBS0MsaUJBQUwsR0FBeUJDLElBQXpCLENBQThCLFVBQU0sQ0FDbEMsTUFBS0gsUUFBTCxDQUFjLENBQUVDLFdBQVksS0FBZCxDQUFkLEVBQ0QsQ0FGRCxFQUdELENBbkZrQixPQXNGbkJHLGFBdEZtQixDQXNGSCxVQUFNLENBQ3BCLEdBQUlDLFFBQVMsRUFBYixDQUNBLEdBQUlDLFlBQWEsS0FBakIsQ0FFQSxDQUFDLE9BQUQsRUFDR0MsT0FESCxDQUNXLFNBQUNDLElBQUQsQ0FBVSxDQUNqQixHQUFJQyxPQUFRLE1BQUtELElBQUwsRUFBV0MsS0FBWCxFQUFaLENBRUEsR0FBSSxDQUFDQSxLQUFMLENBQVksQ0FDVkosT0FBT0csSUFBUCxFQUFlLG9CQUFmLENBQ0FGLFdBQWEsSUFBYixDQUNELENBSEQsSUFHTyxDQUNMLEdBQUksVUFBWUUsSUFBWixFQUFvQkMsTUFBTUMsTUFBTixDQUFlLENBQXZDLENBQTBDLENBQ3hDTCxPQUFPRyxJQUFQLEVBQWUsOEJBQWYsQ0FDQUYsV0FBYSxJQUFiLENBQ0QsQ0FDRixDQUNGLENBYkgsRUFlQSxDQUFDLE9BQUQsRUFDR0MsT0FESCxDQUNXLFNBQUNDLElBQUQsQ0FBVSxDQUNqQixHQUFJQyxPQUFRLE1BQUtELElBQUws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Q0FLUEgsV0FBWSxLQUxMLENBTVBDLFNBQVUsRUFOSCxDQWpCc0IsQ0F5Qi9CbEIsT0FBUSxDQUNOcUIsZ0JBQWlCLFNBRFgsQ0FFTkMsYUFBYyxFQUZSLENBR05DLE9BQVEsRUFIRixDQUlOdEIsTUFBTyxHQUpELENBS05hLGNBQWUsS0FMVCxDQU1OQyxlQUFnQixRQU5WLENBT05TLFdBQVksUUFQTixDQXpCdUIsQ0FrQy9CckIsTUFBTyxDQUNMcUIsV0FBWSxRQURQLENBRUxILGdCQUFpQixTQUZaLENBR0xJLFNBQVUsQ0FITCxDQUlMQyxPQUFRLENBSkgsQ0FLTEMsUUFBUyxFQUxKLENBTUxDLFlBQWEsU0FOUixDQU9MQyxjQUFlLEdBUFYsQ0FRTEMsYUFBYyxDQVJULENBU0xDLGFBQWMsQ0FDWlIsT0FBUSxDQURJLENBRVp0QixNQUFPLENBRkssQ0FUVCxDQWFMK0IsVUFBVyxDQWJOLENBbEN3QixDQWlEL0I1QixNQUFPLENBQ0x4QyxNQUFPLFNBREYsQ0FFTHFELFdBQVksS0FGUCxDQWpEd0IsQ0FBbEIsQ0FBZiIsImZpbGUiOiJSZWdpc3RlckNhci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gJ3JlYWN0LW5hdGl2ZS1tYXRlcmlhbC10ZXh0ZmllbGQnO1xuaW1wb3J0IHsgVmlldywgVGV4dCwgVG91Y2hhYmxlT3BhY2l0eSwgU2Nyb2xsVmlldywgU3R5bGVTaGVldCwgQWxlcnQsIEZsYXRMaXN0LCBSZWZyZXNoQ29udHJvbCB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG4vLyBpbXBvcnQgRXhwbyBmcm9tICdleHBvJ1xuLy8gaW1wb3J0IHsgUGVybWlzc2lvbnMsIE5vdGlmaWNhdGlvbnMgfSBmcm9tICdleHBvJ1xuaW1wb3J0IGp3dF9kZWNvZGUgZnJvbSAnand0LWRlY29kZSc7XG5pbXBvcnQgeyBDQVJfQVBJIH0gZnJvbSAnLi4vY29uc3QvQ29uc3QnXG5cblxuLy8gdmFyIHRrXG4vLyBhc3luYyBmdW5jdGlvbiByZWdpc3RlcigpIHtcbi8vICAgY29uc3QgeyBzdGF0dXMgfSA9IGF3YWl0IEV4cG8uUGVybWlzc2lvbnMuYXNrQXN5bmMoXG4vLyAgICAgRXhwby5QZXJtaXNzaW9ucy5OT1RJRklDQVRJT05TXG4vLyAgICk7XG4vLyAgIGlmIChzdGF0dXMgIT0gJ2dyYW50ZWQnKSB7XG4vLyAgICAgYWxlcnQoJ1lvdSBuZWVkIHRvIGVuYWJsZSBwZXJtaXNzaW9ucyBpbiBzZXR0aW5ncycpO1xuLy8gICAgIHJldHVybjtcbi8vICAgfVxuXG4vLyAgIGNvbnN0IHZhbHVlID0gYXdhaXQgRXhwby5Ob3RpZmljYXRpb25zLmdldEV4cG9QdXNoVG9rZW5Bc3luYygpO1xuLy8gICB0ayA9IHZhbHVlO1xuLy8gICBjb25zb2xlLmxvZyhzdGF0dXMsIHZhbHVlKTtcbi8vIH1cblxuLy8gYXN5bmMgZnVuY3Rpb24gbGlzdCgpIHtcbi8vICAgY29uc3QgeyBzdGF0dXM6IGV4aXN0aW5nU3RhdHVzIH0gPSBhd2FpdCBQZXJtaXNzaW9ucy5nZXRBc3luYyhcbi8vICAgICBQZXJtaXNzaW9ucy5OT1RJRklDQVRJT05TXG4vLyAgICk7XG4vLyAgIGxldCBmaW5hbFN0YXR1cyA9IGV4aXN0aW5nU3RhdHVzO1xuXG4vLyAgIC8vIG9ubHkgYXNrIGlmIHBlcm1pc3Npb25zIGhhdmUgbm90IGFscmVhZHkgYmVlbiBkZXRlcm1pbmVkLCBiZWNhdXNlXG4vLyAgIC8vIGlPUyB3b24ndCBuZWNlc3NhcmlseSBwcm9tcHQgdGhlIHVzZXIgYSBzZWNvbmQgdGltZS5cbi8vICAgaWYgKGV4aXN0aW5nU3RhdHVzICE9PSAnZ3JhbnRlZCcpIHtcbi8vICAgICAvLyBBbmRyb2lkIHJlbW90ZSBub3RpZmljYXRpb24gcGVybWlzc2lvbnMgYXJlIGdyYW50ZWQgZHVyaW5nIHRoZSBhcHBcbi8vICAgICAvLyBpbnN0YWxsLCBzbyB0aGlzIHdpbGwgb25seSBhc2sgb24gaU9TXG4vLyAgICAgY29uc3QgeyBzdGF0dXMgfSA9IGF3YWl0IFBlcm1pc3Npb25zLmFza0FzeW5jKFBlcm1pc3Npb25zLk5PVElGSUNBVElPTlMpO1xuLy8gICAgIGZpbmFsU3RhdHVzID0gc3RhdHVzO1xuLy8gICB9XG5cbi8vICAgLy8gU3RvcCBoZXJlIGlmIHRoZSB1c2VyIGRpZCBub3QgZ3JhbnQgcGVybWlzc2lvbnNcbi8vICAgaWYgKGZpbmFsU3RhdHVzICE9PSAnZ3JhbnRlZCcpIHtcbi8vICAgICByZXR1cm47XG4vLyAgIH1cbi8vICAgdmFyIHZhbHVlXG4vLyAgIHZhciB0ayA9IGF3YWl0IFByb21pc2Vcbi8vICAgICAucmVzb2x2ZSh2YWx1ZSA9IGF3YWl0IE5vdGlmaWNhdGlvbnMuZ2V0RXhwb1B1c2hUb2tlbkFzeW5jKCkpXG4vLyAgICAgLnRoZW4oeCA9PiB2YWx1ZSk7XG4vLyAgIHJldHVybiB0aztcblxuLy8gfVxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlZ2lzdGVyQ2FyIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMucGxhdGVSZWYgPSB0aGlzLnVwZGF0ZVJlZi5iaW5kKHRoaXMsICdwbGF0ZScpO1xuICAgIHRoaXMubW9kZWxSZWYgPSB0aGlzLnVwZGF0ZVJlZi5iaW5kKHRoaXMsICdtb2RlbCcpO1xuICAgIHRoaXMuY29sb3JSZWYgPSB0aGlzLnVwZGF0ZVJlZi5iaW5kKHRoaXMsICdjb2xvcicpO1xuICAgIHRoaXMub25Gb2N1cyA9IHRoaXMub25Gb2N1cy5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHBsYXRlOiAnJyxcbiAgICAgIG1vZGVsOiAnJyxcbiAgICAgIGNvbG9yOiAnJyxcbiAgICAgIHJlZnJlc2hpbmc6IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIG9uRm9jdXMoKSB7XG4gICAgbGV0IHsgZXJyb3JzID0ge30gfSA9IHRoaXMuc3RhdGU7XG5cbiAgICBmb3IgKGxldCB0ZXh0IGluIGVycm9ycykge1xuICAgICAgbGV0IHJlZiA9IHRoaXNbdGV4dF07XG5cbiAgICAgIGlmIChyZWYgJiYgcmVmLmlzRm9jdXNlZCgpKSB7XG4gICAgICAgIGRlbGV0ZSBlcnJvcnNbdGV4dF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGVycm9ycyB9KTtcbiAgfVxuXG4gIG9uQ2hhbmdlVGV4dCh3b3Jkcykge1xuICAgIFsncGxhdGUnXVxuICAgICAgLm1hcCgodGV4dCkgPT4gKHsgdGV4dCwgcmVmOiB0aGlzW3RleHRdIH0pKVxuICAgICAgLmZvckVhY2goKHsgdGV4dCwgcmVmIH0pID0+IHtcbiAgICAgICAgaWYgKHJlZiAmJiByZWYuaXNGb2N1c2VkKCkpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgW3RleHRdOiB3b3JkcyB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgWydtb2RlbCddXG4gICAgICAubWFwKCh0ZXh0KSA9PiAoeyB0ZXh0LCByZWY6IHRoaXNbdGV4dF0gfSkpXG4gICAgICAuZm9yRWFjaCgoeyB0ZXh0LCByZWYgfSkgPT4ge1xuICAgICAgICBpZiAocmVmICYmIHJlZi5pc0ZvY3VzZWQoKSkge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBbdGV4dF06IHdvcmRzIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICBbJ2NvbG9yJ11cbiAgICAgIC5tYXAoKHRleHQpID0+ICh7IHRleHQsIHJlZjogdGhpc1t0ZXh0XSB9KSlcbiAgICAgIC5mb3JFYWNoKCh7IHRleHQsIHJlZiB9KSA9PiB7XG4gICAgICAgIGlmIChyZWYgJiYgcmVmLmlzRm9jdXNlZCgpKSB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IFt0ZXh0XTogd29yZHMgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGhhc0Vycm9yOiBmYWxzZSwgZXJyb3JNZXNzYWdlOiAnJyB9KVxuICAgIGNvbnN0IHsgc3RhdGUgfSA9IHRoaXMucHJvcHMubmF2aWdhdGlvbjtcbiAgICB2YXIgdG9rZW4gPSBzdGF0ZS5wYXJhbXMgPyBzdGF0ZS5wYXJhbXMudG9rZW4gOiB1bmRlZmluZWQ7XG4gICAgdXNlciA9IGp3dF9kZWNvZGUodG9rZW4pXG4gICAgbGV0IGxpbmsgPSBDQVJfQVBJICsgJy9jYXIvP3Rva2VuPScgKyB1c2VyLnVzZXJfaWRcblxuICAgIHJldHVybiBmZXRjaChsaW5rKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAudGhlbigocmVzcG9uc2VKc29uKSA9PiB7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICBkYXRhU291cmNlOiByZXNwb25zZUpzb24sXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB9KTtcblxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9vblJlZnJlc2ggPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHJlZnJlc2hpbmc6IHRydWUgfSk7XG4gICAgdGhpcy5jb21wb25lbnREaWRNb3VudCgpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlZnJlc2hpbmc6IGZhbHNlIH0pO1xuICAgIH0pO1xuICB9XG5cblxuICBvblByZXNzQnV0dG9uID0gKCkgPT4ge1xuICAgIGxldCBlcnJvcnMgPSB7fTtcbiAgICBsZXQgZXJyb3JQbGF0ZSA9IGZhbHNlO1xuXG4gICAgWydwbGF0ZSddXG4gICAgICAuZm9yRWFjaCgodGV4dCkgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzW3RleHRdLnZhbHVlKCk7XG5cbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgIGVycm9yc1t0ZXh0XSA9ICdDYW1wbyBvYnJpZ2F0w7NyaW8uJztcbiAgICAgICAgICBlcnJvclBsYXRlID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoJ3BsYXRlJyA9PT0gdGV4dCAmJiB2YWx1ZS5sZW5ndGggPCA4KSB7XG4gICAgICAgICAgICBlcnJvcnNbdGV4dF0gPSAnUGxhY2EgaW52w6FsaWRhLiBFeC46QUFBLTAwMDAnO1xuICAgICAgICAgICAgZXJyb3JQbGF0ZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIFsncGxhdGUnXVxuICAgICAgLmZvckVhY2goKHRleHQpID0+IHtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpc1t0ZXh0XS52YWx1ZSgpO1xuXG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICBlcnJvcnNbdGV4dF0gPSAnQ2FtcG8gb2JyaWdhdMOzcmlvLic7XG4gICAgICAgICAgZXJyb3JQbGF0ZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCdwbGF0ZScgPT09IHRleHQgJiYgdmFsdWUubGVuZ3RoIDwgOCkge1xuICAgICAgICAgICAgZXJyb3JzW3RleHRdID0gJ1BsYWNhIGludsOhbGlkYS4gRXguOkFBQS0wMDAwJztcbiAgICAgICAgICAgIGVycm9yUGxhdGUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBbJ21vZGVsJ11cbiAgICAgIC5mb3JFYWNoKCh0ZXh0KSA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXNbdGV4dF0udmFsdWUoKTtcbiAgICAgIH0pO1xuXG4gICAgWydjb2xvciddXG4gICAgICAuZm9yRWFjaCgodGV4dCkgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzW3RleHRdLnZhbHVlKCk7XG4gICAgICB9KTtcblxuXG4gICAgaWYgKGVycm9yUGxhdGUgPT0gZmFsc2UpIHtcblxuICAgICAgY29uc3QgeyBzdGF0ZSB9ID0gdGhpcy5wcm9wcy5uYXZpZ2F0aW9uO1xuICAgICAgdmFyIHRva2VuID0gc3RhdGUucGFyYW1zID8gc3RhdGUucGFyYW1zLnRva2VuIDogdW5kZWZpbmVkO1xuICAgICAgdXNlciA9IGp3dF9kZWNvZGUodG9rZW4pXG5cbiAgICAgIGNvbnN0IHVybCA9ICdodHRwOi8vY2FyZGVmZW5zZS5lYXN0dXMuY2xvdWRhcHAuYXp1cmUuY29tOjgwMDMvJyArICcvdmFsaWRhdGVfY2FyLycgLy9jYXJzIGRiIG1vZGVscyB1cmxcblxuICAgICAgbGV0IG5vdGlmaWNhdGlvbiA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWRfdG9rZW46IHVzZXIudXNlcl9pZCxcbiAgICAgICAgcGxhdGU6IHRoaXMuc3RhdGUucGxhdGUsXG4gICAgICAgIG1vZGVsOiB0aGlzLnN0YXRlLm1vZGVsLFxuICAgICAgICBjb2xvcjogdGhpcy5zdGF0ZS5jb2xvclxuICAgICAgfSlcblxuICAgICAgY29uc29sZS5sb2cobm90aWZpY2F0aW9uKVxuXG4gICAgICBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IG5vdGlmaWNhdGlvblxuICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7IHJldHVybiByZXNwb25zZS5qc29uKCkgfVxuICAgICAgKS50aGVuKGpzb25SZXNwb25zZSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGpzb25SZXNwb25zZSk7XG4gICAgICAgIC8vIHRoaXMuc2V0U3RhdGUoeyByZWdpc3RlcmVkOiB0cnVlLCByZWdpc3Rlck1lc3NhZ2U6ICdWZcOtY3VsbyBjYWRhc3RyYWRvIScgfSlcbiAgICAgICAgQWxlcnQuYWxlcnQoJ1Zlw61jdWxvIGNhZGFzdHJhZG8hJylcbiAgICAgIH1cbiAgICAgICkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgQWxlcnQuYWxlcnQoJ0Vycm8gYW8gY2FkYXN0cmFyIScpXG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHsgZXJyb3JzIH0pO1xuICB9XG5cbiAgdXBkYXRlUmVmKHRleHQsIHJlZikge1xuICAgIHRoaXNbdGV4dF0gPSByZWY7XG4gIH1cblxuICByZW5kZXIoKSB7XG5cbiAgICBsZXQgeyBlcnJvcnMgPSB7fSwgLi4uZGF0YSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBsZXQgeyBwbGF0ZSA9ICd0ZXh0JyB9ID0gZGF0YTtcbiAgICBsZXQgeyBtb2RlbCA9ICd0ZXh0JyB9ID0gZGF0YTtcbiAgICBsZXQgeyBjb2xvciA9ICd0ZXh0JyB9ID0gZGF0YTtcblxuICAgIHJldHVybiAoXG4gICAgICA8U2Nyb2xsVmlld1xuICAgICAgICByZWZyZXNoQ29udHJvbD17XG4gICAgICAgICAgPFJlZnJlc2hDb250cm9sXG4gICAgICAgICAgICByZWZyZXNoaW5nPXt0aGlzLnN0YXRlLnJlZnJlc2hpbmd9XG4gICAgICAgICAgICBvblJlZnJlc2g9e3RoaXMuX29uUmVmcmVzaH1cbiAgICAgICAgICAvPlxuICAgICAgICB9XG4gICAgICA+XG4gICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuY29udGFpbmVyfT5cbiAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLmhlYWRlcn0+IENhZGFzdHJvPC9UZXh0PlxuICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgIHJlZj17dGhpcy5wbGF0ZVJlZn1cbiAgICAgICAgICAgIHZhbHVlPXtkYXRhLnBsYXRlfVxuICAgICAgICAgICAgYXV0b0NvcnJlY3Q9e2ZhbHNlfVxuICAgICAgICAgICAgZW5hYmxlc1JldHVybktleUF1dG9tYXRpY2FsbHk9e3RydWV9XG4gICAgICAgICAgICBvbkZvY3VzPXt0aGlzLm9uRm9jdXN9XG4gICAgICAgICAgICBvbkNoYW5nZVRleHQ9eyhwbGF0ZSkgPT4gdGhpcy5zZXRTdGF0ZSh7IHBsYXRlIH0pfVxuICAgICAgICAgICAgLy8gb25DaGFuZ2VUZXh0PXt0aGlzLm9uQ2hhbmdlVGV4dH1cbiAgICAgICAgICAgIC8vIG9uU3VibWl0RWRpdGluZz17dGhpcy5vblN1Ym1pdFBMYXRlfVxuICAgICAgICAgICAgcmV0dXJuS2V5VHlwZT0nbmV4dCdcbiAgICAgICAgICAgIGxhYmVsPSdQbGFjYSdcbiAgICAgICAgICAgIHRpbnRDb2xvcj1cIiM3NjBmOWZcIlxuICAgICAgICAgICAgdW5kZXJsaW5lQ29sb3JBbmRyb2lkPVwidHJhbnNwYXJlbnRcIlxuICAgICAgICAgICAgbWF4TGVuZ3RoPXs4fVxuICAgICAgICAgICAgYXV0b0NhcGl0YWxpemU9XCJjaGFyYWN0ZXJzXCJcbiAgICAgICAgICAgIGVycm9yPXtlcnJvcnMucGxhdGV9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICByZWY9e3RoaXMubW9kZWxSZWZ9XG4gICAgICAgICAgICB2YWx1ZT17ZGF0YS5tb2RlbH1cbiAgICAgICAgICAgIGF1dG9Db3JyZWN0PXtmYWxzZX1cbiAgICAgICAgICAgIGVuYWJsZXNSZXR1cm5LZXlBdXRvbWF0aWNhbGx5PXt0cnVlfVxuICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5vbkZvY3VzfVxuICAgICAgICAgICAgb25DaGFuZ2VUZXh0PXsobW9kZWwpID0+IHRoaXMuc2V0U3RhdGUoeyBtb2RlbCB9KX1cbiAgICAgICAgICAgIC8vIG9uQ2hhbmdlVGV4dD17dGhpcy5vbkNoYW5nZVRleHR9XG4gICAgICAgICAgICAvLyBvblN1Ym1pdEVkaXRpbmc9e3RoaXMub25TdWJtaXRNb2RlbH1cbiAgICAgICAgICAgIHJldHVybktleVR5cGU9J25leHQnXG4gICAgICAgICAgICBsYWJlbD0nTW9kZWxvJ1xuICAgICAgICAgICAgdGludENvbG9yPVwiIzc2MGY5ZlwiXG4gICAgICAgICAgLz5cbiAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICByZWY9e3RoaXMuY29sb3JSZWZ9XG4gICAgICAgICAgICB2YWx1ZT17ZGF0YS5jb2xvcn1cbiAgICAgICAgICAgIGF1dG9Db3JyZWN0PXtmYWxzZX1cbiAgICAgICAgICAgIGVuYWJsZXNSZXR1cm5LZXlBdXRvbWF0aWNhbGx5PXt0cnVlfVxuICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5vbkZvY3VzfVxuICAgICAgICAgICAgb25DaGFuZ2VUZXh0PXsoY29sb3IpID0+IHRoaXMuc2V0U3RhdGUoeyBjb2xvciB9KX1cbiAgICAgICAgICAgIC8vIG9uQ2hhbmdlVGV4dD17dGhpcy5vbkNoYW5nZVRleHR9XG4gICAgICAgICAgICAvLyBvblN1Ym1pdEVkaXRpbmc9e3RoaXMub25TdWJtaXRNZXNzYWdlfVxuICAgICAgICAgICAgcmV0dXJuS2V5VHlwZT0nbmV4dCdcbiAgICAgICAgICAgIGxhYmVsPSdDb3InXG4gICAgICAgICAgICB0aW50Q29sb3I9XCIjNzYwZjlmXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L1ZpZXc+XG4gICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuY29udGFpbmVyMX0+XG4gICAgICAgICAgPFRvdWNoYWJsZU9wYWNpdHlcbiAgICAgICAgICAgIHN0eWxlPXtzdHlsZXMuYnV0dG9ufVxuICAgICAgICAgICAgY29sb3I9XCIjNWM2OGMzXCJcbiAgICAgICAgICAgIG9uUHJlc3M9e3RoaXMub25QcmVzc0J1dHRvbn1cbiAgICAgICAgICAgIGNvbnRhaW5lclZpZXdTdHlsZT17eyB3aWR0aDogJzQwJScgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8VGV4dCBzdHlsZT17eyBjb2xvcjogJ3doaXRlJyB9fSA+Q2FkYXN0cmFyPC9UZXh0PlxuICAgICAgICAgIDwvVG91Y2hhYmxlT3BhY2l0eT5cbiAgICAgICAgICB7Lyoge3RoaXMuc3RhdGUucmVnaXN0ZXJlZCA/IDxUZXh0IHN0eWxlPXt7IGZsZXhEaXJlY3Rpb246ICdyb3cnLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIGNvbG9yOiAnIzVjNjhjMycsIG1hcmdpblRvcDogMjAgfX0+e3RoaXMuc3RhdGUucmVnaXN0ZXJNZXNzYWdlfTwvVGV4dD4gOiBudWxsIH0gKi99XG5cbiAgICAgICAgPC9WaWV3PlxuICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLmNvbnRhaW5lcjF9PlxuICAgICAgICAgIDxGbGF0TGlzdFxuICAgICAgICAgICAgZGF0YT17dGhpcy5zdGF0ZS5kYXRhU291cmNlfVxuICAgICAgICAgICAgcmVuZGVySXRlbT17KHsgaXRlbSB9KSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5pdGVtMn0+XG4gICAgICAgICAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLnRleHQxfT57aXRlbS5wbGF0ZX08L1RleHQ+XG4gICAgICAgICAgICAgICAgPC9WaWV3PlxuXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAga2V5RXh0cmFjdG9yPXsoeyBpZCB9LCBpbmRleCkgPT4gaWQudG9TdHJpbmcoKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1ZpZXc+XG4gICAgICA8L1Njcm9sbFZpZXc+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIGNvbnRhaW5lcjoge1xuICAgIHBhZGRpbmdMZWZ0OiAxNixcbiAgICBwYWRkaW5nUmlnaHQ6IDE2XG4gIH0sXG4gIGNvbnRhaW5lcjE6IHtcbiAgICBtYXJnaW5Ub3A6IDgwLFxuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xuICB9LFxuICBoZWFkZXI6IHtcbiAgICBjb2xvcjogJyM3NjBmOWYnLFxuICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgZm9udFdlaWdodDogJzIwMCcsXG4gICAgZm9udFNpemU6IDUwLFxuICAgIG1hcmdpblRvcDogMjVcbiAgfSxcbiAgaGVhZGVyMjoge1xuICAgIGNvbG9yOiAnIzc2MGY5ZicsXG4gICAgdGV4dEFsaWduOiAnbGVmdCcsXG4gICAgcGFkZGluZ0xlZnQ6IDIwLFxuICAgIHBhZGRpbmdUb3A6IDM1LFxuICAgIGZvbnRXZWlnaHQ6ICcxMDAnLFxuICAgIGZvbnRTaXplOiAzMCxcbiAgfSxcbiAgYnV0dG9uOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiBcIiM3NjBmOWZcIixcbiAgICBib3JkZXJSYWRpdXM6IDE1LFxuICAgIGhlaWdodDogNDAsXG4gICAgd2lkdGg6IDEyMCxcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcidcbiAgfSxcbiAgaXRlbTI6IHtcbiAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgIGJhY2tncm91bmRDb2xvcjogXCIjZmZmZmZmXCIsXG4gICAgZmxleEdyb3c6IDEsXG4gICAgbWFyZ2luOiA0LFxuICAgIHBhZGRpbmc6IDIwLFxuICAgIHNoYWRvd0NvbG9yOiBcIiMwMDAwMDBcIixcbiAgICBzaGFkb3dPcGFjaXR5OiAwLjgsXG4gICAgc2hhZG93UmFkaXVzOiAyLFxuICAgIHNoYWRvd09mZnNldDoge1xuICAgICAgaGVpZ2h0OiAxLFxuICAgICAgd2lkdGg6IDFcbiAgICB9LFxuICAgIGVsZXZhdGlvbjogNFxuICB9LFxuICB0ZXh0MToge1xuICAgIGNvbG9yOiBcIiM3NjBmOWZcIixcbiAgICBmb250V2VpZ2h0OiAnMjAwJyxcbiAgfVxufSk7Il19