{"version":3,"sources":["PrivateFeed.js"],"names":["registerForPushNotificationsAsync","Expo","Permissions","getAsync","NOTIFICATIONS","existingStatus","status","finalStatus","askAsync","Promise","Notifications","getExpoPushTokenAsync","token","resolve","then","tk","Feed","listener","addListener","listen","props","origin","data","console","log","getPrivateFeedInfo","url","NOTIFICATIONS_API","fetch","response","json","responseJson","setState","isLoading","dataSource","catch","error","_onRefresh","refreshing","componentDidMount","state","styles","item","item2","text1","title","uri","image","width","height","text","message","index","id","toString","React","Component","StyleSheet","create","backgroundColor","margin","shadowColor","shadowOpacity","shadowRadius","shadowOffset","elevation","alignItems","justifyContent","flexGrow","padding","borderRadius","color","fontWeight"],"mappings":"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","file":"PrivateFeed.js","sourcesContent":["import React from 'react';\nimport { FlatList, Text, View, StyleSheet, ScrollView, RefreshControl, Image } from 'react-native';\nimport {  NOTIFICATIONS_API } from '../const/Const'\nimport Expo from 'expo'\n\nasync function registerForPushNotificationsAsync() {\n  const { status: existingStatus } = await Expo.Permissions.getAsync(\n    Expo.Permissions.NOTIFICATIONS\n  );\n  let finalStatus = existingStatus;\n\n  // only ask if permissions have not already been determined, because\n  // iOS won't necessarily prompt the user a second time.\n  if (existingStatus !== 'granted') {\n    // Android remote notification permissions are granted during the app\n    // install, so this will only ask on iOS\n    const { status } = await Expo.Permissions.askAsync(Expo.Permissions.NOTIFICATIONS);\n    finalStatus = status;\n  }\n\n  // Stop here if the user did not grant permissions\n  if (finalStatus !== 'granted') {\n    return;\n  }\n  var token\n  var tk = await Promise\n    .resolve (token = await Expo.Notifications.getExpoPushTokenAsync())\n    .then(x => token);\n  return tk;\n  \n\n}\n\nexport default class Feed extends React.Component {\n\n  componentWillMount() {\n    \n    this.listener = Expo.Notifications.addListener(this.listen);\n  }\n  componentWillUnmount() {\n    this.listener && Expo.Notifications.addListener(this.listen);\n  }\n\n  listen = ({ origin, data }) => {\n    console.log('cool data', origin, data);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      refreshing: false,\n    };\n  }\n\n  getPrivateFeedInfo = () => {\n    let url = NOTIFICATIONS_API + `/notifications`\n\n    return fetch(url)\n      .then((response) => response.json())\n      .then((responseJson) => {\n\n        this.setState({\n          isLoading: false,\n          dataSource: responseJson,\n        }, function () {\n\n        });\n\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }\n\n  async componentDidMount() {\n    this.getPrivateFeedInfo()\n  }\n\n  _onRefresh = () => {\n    this.setState({refreshing: true});\n    this.componentDidMount().then(() => {\n      this.setState({refreshing: false});\n    });\n  }\n\n  render() {\n    return (\n      <ScrollView style={styles.item}\n      refreshControl={\n        <RefreshControl\n          refreshing={this.state.refreshing}\n          onRefresh={this._onRefresh}\n        />\n      }\n      >\n        <FlatList\n          data={this.state.dataSource}\n          renderItem={({ item }) => {\n            return (\n              <View style={styles.item2}>\n                <Text style={styles.text1}>{item.title}</Text>\n                <Image source={{uri:item.image}}\n                  style={{width: 400, height: 200}} />\n                <Text style={styles.text}>{item.message}</Text>\n              </View>\n            );\n          }}\n          keyExtractor={({ id }, index) => id.toString()}\n          \n        />\n        \n      </ScrollView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  item: {\n    backgroundColor: \"#ffffff\",\n    margin: 4,\n    shadowColor: \"#000000\",\n    shadowOpacity: 0.8,\n    shadowRadius: 2,\n    shadowOffset: {\n      height: 1,\n      width: 1\n    },\n    elevation: 4\n  },\n  item2: {\n    alignItems: \"center\",\n    justifyContent: 'center',\n    backgroundColor: \"#ffffff\",\n    flexGrow: 1,\n    margin: 4,\n    padding: 20,\n    borderRadius: 10,\n    shadowColor: \"#000000\",\n    shadowOpacity: 0.8,\n    shadowRadius: 2,\n    shadowOffset: {\n      height: 1,\n      width: 1\n    },\n    elevation: 4\n  },\n  text: {\n    color: \"#540b71\",\n    fontWeight: '100'\n  },\n  text1: {\n    color: \"#540b71\",\n    fontWeight: 'bold',\n  }\n});\n"]}