ef531249a76b7489edeb89ffb7eacbdc
Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require('react-native');var _jwtDecode=require('jwt-decode');var _jwtDecode2=_interopRequireDefault(_jwtDecode);var _Const=require('./TabNavigator/const/Const.js');var _expo=require('expo');var _expo2=_interopRequireDefault(_expo);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var tk;function register(){var _ref,status,value;return regeneratorRuntime.async(function register$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_expo2.default.Permissions.askAsync(_expo2.default.Permissions.NOTIFICATIONS));case 2:_ref=_context.sent;status=_ref.status;if(!(status!='granted')){_context.next=7;break;}alert('You need to enable permissions in settings');return _context.abrupt('return');case 7:_context.next=9;return regeneratorRuntime.awrap(_expo2.default.Notifications.getExpoPushTokenAsync());case 9:value=_context.sent;tk=value;console.log(status,value);case 12:case'end':return _context.stop();}}},null,this);}var Feed=function(_React$Component){_inherits(Feed,_React$Component);_createClass(Feed,[{key:'componentWillMount',value:function componentWillMount(){register();this.listener=_expo2.default.Notifications.addListener(this.listen);}},{key:'componentWillUnmount',value:function componentWillUnmount(){this.listener&&_expo2.default.Notifications.addListener(this.listen);}}]);function Feed(props){_classCallCheck(this,Feed);var _this=_possibleConstructorReturn(this,(Feed.__proto__||Object.getPrototypeOf(Feed)).call(this,props));_this.listen=function(_ref2){var origin=_ref2.origin,data=_ref2.data;console.log('cool data',origin,data);};_this.sendIdData=function(){var state=_this.props.navigation.state;var token=state.params?state.params.token:undefined;console.log(token);user=(0,_jwtDecode2.default)(token);console.log(token);var notification=JSON.stringify({id_token:user.user_id,notification_token:tk});console.log(notification);fetch(_Const.PROFILE_API+'/set_token/',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:notification}).then(function(response){return response.json();}).then(function(jsonResponse){console.log(jsonResponse);}).catch(function(error){console.log(error);});};_this.getFeedInfo=function(){return fetch(_Const.NOTIFICATIONS_API+'/emergencynotifications/').then(function(response){return response.json();}).then(function(responseJson){_this.setState({isLoading:false,dataSource:responseJson},function(){});}).catch(function(error){console.error(error);});};_this._onRefresh=function(){_this.setState({refreshing:true});_this.componentDidMount().then(function(){_this.setState({refreshing:false});});};_this.state={refreshing:false};return _this;}_createClass(Feed,[{key:'componentDidMount',value:function componentDidMount(){return regeneratorRuntime.async(function componentDidMount$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.sendIdData();this.getFeedInfo();case 2:case'end':return _context2.stop();}}},null,this);}},{key:'render',value:function render(){return _react2.default.createElement(_reactNative.ScrollView,{style:styles.item,refreshControl:_react2.default.createElement(_reactNative.RefreshControl,{refreshing:this.state.refreshing,onRefresh:this._onRefresh})},_react2.default.createElement(_reactNative.FlatList,{data:this.state.dataSource,renderItem:function renderItem(_ref3){var item=_ref3.item;return _react2.default.createElement(_reactNative.View,{style:styles.item2},_react2.default.createElement(_reactNative.Text,{style:styles.text1},item.title),_react2.default.createElement(_reactNative.Image,{source:{uri:item.image},style:{width:400,height:200}}),_react2.default.createElement(_reactNative.Text,{style:styles.text},item.message));},keyExtractor:function keyExtractor(_ref4,index){var id=_ref4.id;return id;}}));}}]);return Feed;}(_react2.default.Component);exports.default=Feed;var styles=_reactNative.StyleSheet.create({item:{backgroundColor:"#ffffff",margin:4,shadowColor:"#000000",shadowOpacity:0.8,shadowRadius:2,shadowOffset:{height:1,width:1},elevation:4},item2:{alignItems:"center",justifyContent:'center',backgroundColor:"#ffffff",flexGrow:1,margin:4,padding:20,borderRadius:10,shadowColor:"#000000",shadowOpacity:0.8,shadowRadius:2,shadowOffset:{height:1,width:1},elevation:4},text:{color:"#540b71",fontWeight:'100'},text1:{color:"#540b71",fontWeight:'bold'}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZlZWQuanMiXSwibmFtZXMiOlsidGsiLCJyZWdpc3RlciIsIkV4cG8iLCJQZXJtaXNzaW9ucyIsImFza0FzeW5jIiwiTk9USUZJQ0FUSU9OUyIsInN0YXR1cyIsImFsZXJ0IiwiTm90aWZpY2F0aW9ucyIsImdldEV4cG9QdXNoVG9rZW5Bc3luYyIsInZhbHVlIiwiY29uc29sZSIsImxvZyIsIkZlZWQiLCJsaXN0ZW5lciIsImFkZExpc3RlbmVyIiwibGlzdGVuIiwicHJvcHMiLCJvcmlnaW4iLCJkYXRhIiwic2VuZElkRGF0YSIsInN0YXRlIiwibmF2aWdhdGlvbiIsInRva2VuIiwicGFyYW1zIiwidW5kZWZpbmVkIiwidXNlciIsIm5vdGlmaWNhdGlvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJpZF90b2tlbiIsInVzZXJfaWQiLCJub3RpZmljYXRpb25fdG9rZW4iLCJmZXRjaCIsIlBST0ZJTEVfQVBJIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwianNvblJlc3BvbnNlIiwiY2F0Y2giLCJlcnJvciIsImdldEZlZWRJbmZvIiwiTk9USUZJQ0FUSU9OU19BUEkiLCJyZXNwb25zZUpzb24iLCJzZXRTdGF0ZSIsImlzTG9hZGluZyIsImRhdGFTb3VyY2UiLCJfb25SZWZyZXNoIiwicmVmcmVzaGluZyIsImNvbXBvbmVudERpZE1vdW50Iiwic3R5bGVzIiwiaXRlbSIsIml0ZW0yIiwidGV4dDEiLCJ0aXRsZSIsInVyaSIsImltYWdlIiwid2lkdGgiLCJoZWlnaHQiLCJ0ZXh0IiwibWVzc2FnZSIsImluZGV4IiwiaWQiLCJSZWFjdCIsIkNvbXBvbmVudCIsIlN0eWxlU2hlZXQiLCJjcmVhdGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJtYXJnaW4iLCJzaGFkb3dDb2xvciIsInNoYWRvd09wYWNpdHkiLCJzaGFkb3dSYWRpdXMiLCJzaGFkb3dPZmZzZXQiLCJlbGV2YXRpb24iLCJhbGlnbkl0ZW1zIiwianVzdGlmeUNvbnRlbnQiLCJmbGV4R3JvdyIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJjb2xvciIsImZvbnRXZWlnaHQiXSwibWFwcGluZ3MiOiJpbEJBQUEsNEIsMkNBQ0EseUNBQ0EscUMsbURBQ0Esb0RBQ0EsMEIsMDZCQUNBLEdBQUlBLEdBQUosQ0FFQSxRQUFlQyxTQUFmLDBMQUMyQkMsZUFBS0MsV0FBTCxDQUFpQkMsUUFBakIsQ0FDdkJGLGVBQUtDLFdBQUwsQ0FBaUJFLGFBRE0sQ0FEM0IsNEJBQ1VDLE1BRFYsTUFDVUEsTUFEVixNQUlNQSxRQUFVLFNBSmhCLDBCQUtJQyxNQUFNLDRDQUFOLEVBTEosd0ZBU3NCTCxlQUFLTSxhQUFMLENBQW1CQyxxQkFBbkIsRUFUdEIsU0FTUUMsS0FUUixlQVVFVixHQUFLVSxLQUFMLENBQ0FDLFFBQVFDLEdBQVIsQ0FBWU4sTUFBWixDQUFvQkksS0FBcEIsRUFYRix5RCxHQWVxQkcsSyw2SUFFRSxDQUNuQlosV0FDQSxLQUFLYSxRQUFMLENBQWdCWixlQUFLTSxhQUFMLENBQW1CTyxXQUFuQixDQUErQixLQUFLQyxNQUFwQyxDQUFoQixDQUNELEMsbUVBQ3NCLENBQ3JCLEtBQUtGLFFBQUwsRUFBaUJaLGVBQUtNLGFBQUwsQ0FBbUJPLFdBQW5CLENBQStCLEtBQUtDLE1BQXBDLENBQWpCLENBQ0QsQyxJQU1ELGNBQVlDLEtBQVosQ0FBbUIsOEhBQ1hBLEtBRFcsU0FKbkJELE1BSW1CLENBSlYsZUFBc0IsSUFBbkJFLE9BQW1CLE9BQW5CQSxNQUFtQixDQUFYQyxJQUFXLE9BQVhBLElBQVcsQ0FDN0JSLFFBQVFDLEdBQVIsQ0FBWSxXQUFaLENBQXlCTSxNQUF6QixDQUFpQ0MsSUFBakMsRUFDRCxDQUVrQixPQUtuQkMsVUFMbUIsQ0FLTixVQUFNLElBQ1ZDLE1BRFUsQ0FDRCxNQUFLSixLQUFMLENBQVdLLFVBRFYsQ0FDVkQsS0FEVSxDQUVqQixHQUFJRSxPQUFRRixNQUFNRyxNQUFOLENBQWVILE1BQU1HLE1BQU4sQ0FBYUQsS0FBNUIsQ0FBb0NFLFNBQWhELENB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LENBQ0pnQixnQkFBaUIsU0FEYixDQUVKQyxPQUFRLENBRkosQ0FHSkMsWUFBYSxTQUhULENBSUpDLGNBQWUsR0FKWCxDQUtKQyxhQUFjLENBTFYsQ0FNSkMsYUFBYyxDQUNaZCxPQUFRLENBREksQ0FFWkQsTUFBTyxDQUZLLENBTlYsQ0FVSmdCLFVBQVcsQ0FWUCxDQUR5QixDQWEvQnJCLE1BQU8sQ0FDTHNCLFdBQVksUUFEUCxDQUVMQyxlQUFnQixRQUZYLENBR0xSLGdCQUFpQixTQUhaLENBSUxTLFNBQVUsQ0FKTCxDQUtMUixPQUFRLENBTEgsQ0FNTFMsUUFBUyxFQU5KLENBT0xDLGFBQWMsRUFQVCxDQVFMVCxZQUFhLFNBUlIsQ0FTTEMsY0FBZSxHQVRWLENBVUxDLGFBQWMsQ0FWVCxDQVdMQyxhQUFjLENBQ1pkLE9BQVEsQ0FESSxDQUVaRCxNQUFPLENBRkssQ0FYVCxDQWVMZ0IsVUFBVyxDQWZOLENBYndCLENBOEIvQmQsS0FBTSxDQUNKb0IsTUFBTyxTQURILENBRUpDLFdBQVksS0FGUixDQTlCeUIsQ0FrQy9CM0IsTUFBTyxDQUNMMEIsTUFBTyxTQURGLENBRUxDLFdBQVksTUFGUCxDQWxDd0IsQ0FBbEIsQ0FBZiIsImZpbGUiOiJGZWVkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZsYXRMaXN0LCBUZXh0LCBWaWV3LCBTdHlsZVNoZWV0LCBTY3JvbGxWaWV3LCBSZWZyZXNoQ29udHJvbCwgSW1hZ2UgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IGp3dF9kZWNvZGUgZnJvbSAnand0LWRlY29kZSc7XG5pbXBvcnQgeyBOT1RJRklDQVRJT05TX0FQSSwgUFJPRklMRV9BUEkgfSBmcm9tICcuL1RhYk5hdmlnYXRvci9jb25zdC9Db25zdC5qcydcbmltcG9ydCBFeHBvIGZyb20gJ2V4cG8nXG52YXIgdGtcblxuYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXIoKSB7XG4gIGNvbnN0IHsgc3RhdHVzIH0gPSBhd2FpdCBFeHBvLlBlcm1pc3Npb25zLmFza0FzeW5jKFxuICAgIEV4cG8uUGVybWlzc2lvbnMuTk9USUZJQ0FUSU9OU1xuICApO1xuICBpZiAoc3RhdHVzICE9ICdncmFudGVkJykge1xuICAgIGFsZXJ0KCdZb3UgbmVlZCB0byBlbmFibGUgcGVybWlzc2lvbnMgaW4gc2V0dGluZ3MnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB2YWx1ZSA9IGF3YWl0IEV4cG8uTm90aWZpY2F0aW9ucy5nZXRFeHBvUHVzaFRva2VuQXN5bmMoKTtcbiAgdGsgPSB2YWx1ZTtcbiAgY29uc29sZS5sb2coc3RhdHVzLCB2YWx1ZSk7XG4gIFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGZWVkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICByZWdpc3RlcigpO1xuICAgIHRoaXMubGlzdGVuZXIgPSBFeHBvLk5vdGlmaWNhdGlvbnMuYWRkTGlzdGVuZXIodGhpcy5saXN0ZW4pO1xuICB9XG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMubGlzdGVuZXIgJiYgRXhwby5Ob3RpZmljYXRpb25zLmFkZExpc3RlbmVyKHRoaXMubGlzdGVuKTtcbiAgfVxuXG4gIGxpc3RlbiA9ICh7IG9yaWdpbiwgZGF0YSB9KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2Nvb2wgZGF0YScsIG9yaWdpbiwgZGF0YSk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0geyByZWZyZXNoaW5nOiBmYWxzZSwgfVxuICB9XG5cbiAgc2VuZElkRGF0YSA9ICgpID0+IHtcbiAgICBjb25zdCB7c3RhdGV9ID0gdGhpcy5wcm9wcy5uYXZpZ2F0aW9uO1xuICAgIHZhciB0b2tlbiA9IHN0YXRlLnBhcmFtcyA/IHN0YXRlLnBhcmFtcy50b2tlbiA6IHVuZGVmaW5lZDtcbiAgICBjb25zb2xlLmxvZyh0b2tlbilcbiAgICB1c2VyID0gand0X2RlY29kZSh0b2tlbilcbiAgICAgIFxuICAgIGNvbnNvbGUubG9nKHRva2VuKVxuICAgIGxldCBub3RpZmljYXRpb24gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBpZF90b2tlbjogdXNlci51c2VyX2lkLFxuICAgICAgbm90aWZpY2F0aW9uX3Rva2VuOiB0ayxcbiAgICB9KVxuICAgIGNvbnNvbGUubG9nKG5vdGlmaWNhdGlvbik7XG4gICAgZmV0Y2goUFJPRklMRV9BUEkgKyAnL3NldF90b2tlbi8nLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBub3RpZmljYXRpb25cbiAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsgcmV0dXJuIHJlc3BvbnNlLmpzb24oKSB9XG4gICAgKS50aGVuKGpzb25SZXNwb25zZSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhqc29uUmVzcG9uc2UpO1xuICAgIH1cbiAgICApLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgIH0pXG5cbiAgfVxuXG4gIGdldEZlZWRJbmZvID0gKCkgPT4ge1xuICAgIHJldHVybiBmZXRjaChOT1RJRklDQVRJT05TX0FQSSArICcvZW1lcmdlbmN5bm90aWZpY2F0aW9ucy8nKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAudGhlbigocmVzcG9uc2VKc29uKSA9PiB7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICBkYXRhU291cmNlOiByZXNwb25zZUpzb24sXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB9KTtcblxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2VuZElkRGF0YSgpXG4gICAgdGhpcy5nZXRGZWVkSW5mbygpXG4gIH1cblxuICBfb25SZWZyZXNoID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyByZWZyZXNoaW5nOiB0cnVlIH0pO1xuICAgIHRoaXMuY29tcG9uZW50RGlkTW91bnQoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyByZWZyZXNoaW5nOiBmYWxzZSB9KTtcbiAgICB9KTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTY3JvbGxWaWV3IHN0eWxlPXtzdHlsZXMuaXRlbX1cbiAgICAgICAgcmVmcmVzaENvbnRyb2w9e1xuICAgICAgICAgIDxSZWZyZXNoQ29udHJvbFxuICAgICAgICAgICAgcmVmcmVzaGluZz17dGhpcy5zdGF0ZS5yZWZyZXNoaW5nfVxuICAgICAgICAgICAgb25SZWZyZXNoPXt0aGlzLl9vblJlZnJlc2h9XG4gICAgICAgICAgLz5cbiAgICAgICAgfVxuICAgICAgPlxuICAgICAgICA8RmxhdExpc3RcbiAgICAgICAgICBkYXRhPXt0aGlzLnN0YXRlLmRhdGFTb3VyY2V9XG4gICAgICAgICAgcmVuZGVySXRlbT17KHsgaXRlbSB9KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLml0ZW0yfT5cbiAgICAgICAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLnRleHQxfT57aXRlbS50aXRsZX08L1RleHQ+XG4gICAgICAgICAgICAgICAgPEltYWdlIHNvdXJjZT17e3VyaTppdGVtLmltYWdlfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IDQwMCwgaGVpZ2h0OiAyMDB9fSAvPlxuICAgICAgICAgICAgICAgIDxUZXh0IHN0eWxlPXtzdHlsZXMudGV4dH0+e2l0ZW0ubWVzc2FnZX08L1RleHQ+XG4gICAgICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBrZXlFeHRyYWN0b3I9eyh7IGlkIH0sIGluZGV4KSA9PiBpZH1cblxuICAgICAgICAvPlxuICAgICAgPC9TY3JvbGxWaWV3PlxuICAgICk7XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBpdGVtOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiBcIiNmZmZmZmZcIixcbiAgICBtYXJnaW46IDQsXG4gICAgc2hhZG93Q29sb3I6IFwiIzAwMDAwMFwiLFxuICAgIHNoYWRvd09wYWNpdHk6IDAuOCxcbiAgICBzaGFkb3dSYWRpdXM6IDIsXG4gICAgc2hhZG93T2Zmc2V0OiB7XG4gICAgICBoZWlnaHQ6IDEsXG4gICAgICB3aWR0aDogMVxuICAgIH0sXG4gICAgZWxldmF0aW9uOiA0XG4gIH0sXG4gIGl0ZW0yOiB7XG4gICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYmFja2dyb3VuZENvbG9yOiBcIiNmZmZmZmZcIixcbiAgICBmbGV4R3JvdzogMSxcbiAgICBtYXJnaW46IDQsXG4gICAgcGFkZGluZzogMjAsXG4gICAgYm9yZGVyUmFkaXVzOiAxMCxcbiAgICBzaGFkb3dDb2xvcjogXCIjMDAwMDAwXCIsXG4gICAgc2hhZG93T3BhY2l0eTogMC44LFxuICAgIHNoYWRvd1JhZGl1czogMixcbiAgICBzaGFkb3dPZmZzZXQ6IHtcbiAgICAgIGhlaWdodDogMSxcbiAgICAgIHdpZHRoOiAxXG4gICAgfSxcbiAgICBlbGV2YXRpb246IDRcbiAgfSxcbiAgdGV4dDoge1xuICAgIGNvbG9yOiBcIiM1NDBiNzFcIixcbiAgICBmb250V2VpZ2h0OiAnMTAwJ1xuICB9LFxuICB0ZXh0MToge1xuICAgIGNvbG9yOiBcIiM1NDBiNzFcIixcbiAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gIH1cbn0pO1xuIl19