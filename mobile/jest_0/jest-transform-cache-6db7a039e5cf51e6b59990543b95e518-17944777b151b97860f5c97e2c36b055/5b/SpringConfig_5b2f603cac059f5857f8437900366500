9601deb729582d860e98aefdace9e350
'use strict';function stiffnessFromOrigamiValue(oValue){return(oValue-30)*3.62+194;}function dampingFromOrigamiValue(oValue){return(oValue-8)*3+25;}function fromOrigamiTensionAndFriction(tension,friction){return{stiffness:stiffnessFromOrigamiValue(tension),damping:dampingFromOrigamiValue(friction)};}function fromBouncinessAndSpeed(bounciness,speed){function normalize(value,startValue,endValue){return(value-startValue)/(endValue-startValue);}function projectNormal(n,start,end){return start+n*(end-start);}function linearInterpolation(t,start,end){return t*end+(1-t)*start;}function quadraticOutInterpolation(t,start,end){return linearInterpolation(2*t-t*t,start,end);}function b3Friction1(x){return 0.0007*Math.pow(x,3)-0.031*Math.pow(x,2)+0.64*x+1.28;}function b3Friction2(x){return 0.000044*Math.pow(x,3)-0.006*Math.pow(x,2)+0.36*x+2;}function b3Friction3(x){return 0.00000045*Math.pow(x,3)-0.000332*Math.pow(x,2)+0.1078*x+5.84;}function b3Nobounce(tension){if(tension<=18){return b3Friction1(tension);}else if(tension>18&&tension<=44){return b3Friction2(tension);}else{return b3Friction3(tension);}}var b=normalize(bounciness/1.7,0,20);b=projectNormal(b,0,0.8);var s=normalize(speed/1.7,0,20);var bouncyTension=projectNormal(s,0.5,200);var bouncyFriction=quadraticOutInterpolation(b,b3Nobounce(bouncyTension),0.01);return{stiffness:stiffnessFromOrigamiValue(bouncyTension),damping:dampingFromOrigamiValue(bouncyFriction)};}module.exports={fromOrigamiTensionAndFriction:fromOrigamiTensionAndFriction,fromBouncinessAndSpeed:fromBouncinessAndSpeed};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNwcmluZ0NvbmZpZy5qcyJdLCJuYW1lcyI6WyJzdGlmZm5lc3NGcm9tT3JpZ2FtaVZhbHVlIiwib1ZhbHVlIiwiZGFtcGluZ0Zyb21PcmlnYW1pVmFsdWUiLCJmcm9tT3JpZ2FtaVRlbnNpb25BbmRGcmljdGlvbiIsInRlbnNpb24iLCJmcmljdGlvbiIsInN0aWZmbmVzcyIsImRhbXBpbmciLCJmcm9tQm91bmNpbmVzc0FuZFNwZWVkIiwiYm91bmNpbmVzcyIsInNwZWVkIiwibm9ybWFsaXplIiwidmFsdWUiLCJzdGFydFZhbHVlIiwiZW5kVmFsdWUiLCJwcm9qZWN0Tm9ybWFsIiwibiIsInN0YXJ0IiwiZW5kIiwibGluZWFySW50ZXJwb2xhdGlvbiIsInQiLCJxdWFkcmF0aWNPdXRJbnRlcnBvbGF0aW9uIiwiYjNGcmljdGlvbjEiLCJ4IiwiTWF0aCIsInBvdyIsImIzRnJpY3Rpb24yIiwiYjNGcmljdGlvbjMiLCJiM05vYm91bmNlIiwiYiIsInMiLCJib3VuY3lUZW5zaW9uIiwiYm91bmN5RnJpY3Rpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFVQSxhQU9BLFFBQVNBLDBCQUFULENBQW1DQyxNQUFuQyxDQUEyQyxDQUN6QyxNQUFPLENBQUNBLE9BQVMsRUFBVixFQUFnQixJQUFoQixDQUF1QixHQUE5QixDQUNELENBRUQsUUFBU0Msd0JBQVQsQ0FBaUNELE1BQWpDLENBQXlDLENBQ3ZDLE1BQU8sQ0FBQ0EsT0FBUyxDQUFWLEVBQWUsQ0FBZixDQUFtQixFQUExQixDQUNELENBRUQsUUFBU0UsOEJBQVQsQ0FDRUMsT0FERixDQUVFQyxRQUZGLENBR29CLENBQ2xCLE1BQU8sQ0FDTEMsVUFBV04sMEJBQTBCSSxPQUExQixDQUROLENBRUxHLFFBQVNMLHdCQUF3QkcsUUFBeEIsQ0FGSixDQUFQLENBSUQsQ0FFRCxRQUFTRyx1QkFBVCxDQUNFQyxVQURGLENBRUVDLEtBRkYsQ0FHb0IsQ0FDbEIsUUFBU0MsVUFBVCxDQUFtQkMsS0FBbkIsQ0FBMEJDLFVBQTFCLENBQXNDQyxRQUF0QyxDQUFnRCxDQUM5QyxNQUFPLENBQUNGLE1BQVFDLFVBQVQsR0FBd0JDLFNBQVdELFVBQW5DLENBQVAsQ0FDRCxDQUVELFFBQVNFLGNBQVQsQ0FBdUJDLENBQXZCLENBQTBCQyxLQUExQixDQUFpQ0MsR0FBakMsQ0FBc0MsQ0FDcEMsTUFBT0QsT0FBU0QsR0FBS0UsSUFBTUQsS0FBWCxDQUFoQixDQUNELENBRUQsUUFBU0Usb0JBQVQsQ0FBNkJDLENBQTdCLENBQWdDSCxLQUFoQyxDQUF1Q0MsR0FBdkMsQ0FBNEMsQ0FDMUMsTUFBT0UsR0FBSUYsR0FBSixDQUFVLENBQUMsRUFBSUUsQ0FBTCxFQUFVSCxLQUEzQixDQUNELENBRUQsUUFBU0ksMEJBQVQsQ0FBbUNELENBQW5DLENBQXNDSCxLQUF0QyxDQUE2Q0MsR0FBN0MsQ0FBa0QsQ0FDaEQsTUFBT0MscUJBQW9CLEVBQUlDLENBQUosQ0FBUUEsRUFBSUEsQ0FBaEMsQ0FBbUNILEtBQW5DLENBQTBDQyxHQUExQyxDQUFQLENBQ0QsQ0FFRCxRQUFTSSxZQUFULENBQXFCQyxDQUFyQixDQUF3QixDQUN0QixNQUFRLFFBQVNDLEtBQUtDLEdBQUwsQ0FBU0YsQ0FBVCxDQUFZLENBQVosQ0FBVixDQUNKLE1BQVFDLEtBQUtDLEdBQUwsQ0FBU0YsQ0FBVCxDQUFZLENBQVosQ0FESixDQUNzQixLQUFPQSxDQUQ3QixDQUNpQyxJQUR4QyxDQUVELENBRUQsUUFBU0csWUFBVCxDQUFxQkgsQ0FBckIsQ0FBd0IsQ0FDdEIsTUFBUSxVQUFXQyxLQUFLQyxHQUFMLENBQVNGLENBQVQsQ0FBWSxDQUFaLENBQVosQ0FDSixNQUFRQyxLQUFLQyxHQUFMLENBQVNGLENBQVQsQ0FBWSxDQUFaLENBREosQ0FDc0IsS0FBT0EsQ0FEN0IsQ0FDaUMsQ0FEeEMsQ0FFRCxDQUVELFFBQVNJLFlBQVQsQ0FBcUJKLENBQXJCLENBQXdCLENBQ3RCLE1BQVEsWUFBYUMsS0FBS0MsR0FBTCxDQUFTRixDQUFULENBQVksQ0FBWixDQUFkLENBQ0osU0FBV0MsS0FBS0MsR0FBTCxDQUFTRixDQUFULENBQVksQ0FBWixDQURQLENBQ3lCLE9BQVNBLENBRGxDLENBQ3NDLElBRDdDLENBRUQsQ0FFRCxRQUFTSyxXQUFULENBQW9CeEIsT0FBcEIsQ0FBNkIsQ0FDM0IsR0FBSUEsU0FBVyxFQUFmLENBQW1CLENBQ2pCLE1BQU9rQixhQUFZbEIsT0FBWixDQUFQLENBQ0QsQ0FGRCxJQUVPLElBQUlBLFFBQVUsRUFBVixFQUFnQkEsU0FBVyxFQUEvQixDQUFtQyxDQUN4QyxNQUFPc0IsYUFBWXRCLE9BQVosQ0FBUCxDQUNELENBRk0sSUFFQSxDQUNMLE1BQU91QixhQUFZdkIsT0FBWixDQUFQLENBQ0QsQ0FDRixDQUVELEdBQUl5QixHQUFJbEIsVUFBVUYsV0FBYSxHQUF2QixDQUE0QixDQUE1QixDQUErQixFQUEvQixDQUFSLENBQ0FvQixFQUFJZCxjQUFjYyxDQUFkLENBQWlCLENBQWpCLENBQW9CLEdBQXBCLENBQUosQ0FDQSxHQUFJQyxHQUFJbkIsVUFBVUQsTUFBUSxHQUFsQixDQUF1QixDQUF2QixDQUEwQixFQUExQixDQUFSLENBQ0EsR0FBSXFCLGVBQWdCaEIsY0FBY2UsQ0FBZCxDQUFpQixHQUFqQixDQUFzQixHQUF0QixDQUFwQixDQUNBLEdBQUlFLGdCQUFpQlgsMEJBQ25CUSxDQURtQixDQUVuQkQsV0FBV0csYUFBWCxDQUZtQixDQUduQixJQUhtQixDQUFyQixDQU1BLE1BQU8sQ0FDTHpCLFVBQVdOLDBCQUEwQitCLGFBQTFCLENBRE4sQ0FFTHhCLFFBQVNMLHdCQUF3QjhCLGNBQXhCLENBRkosQ0FBUCxDQUlELENBRURDLE9BQU9DLE9BQVAsQ0FBaUIsQ0FDZi9CLDJEQURlLENBRWZLLDZDQUZlLENBQWpCIiwiZmlsZSI6IlNwcmluZ0NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFNwcmluZ0NvbmZpZ1xuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnR5cGUgU3ByaW5nQ29uZmlnVHlwZSA9IHtcbiAgc3RpZmZuZXNzOiBudW1iZXIsXG4gIGRhbXBpbmc6IG51bWJlcixcbn07XG5cbmZ1bmN0aW9uIHN0aWZmbmVzc0Zyb21PcmlnYW1pVmFsdWUob1ZhbHVlKSB7XG4gIHJldHVybiAob1ZhbHVlIC0gMzApICogMy42MiArIDE5NDtcbn1cblxuZnVuY3Rpb24gZGFtcGluZ0Zyb21PcmlnYW1pVmFsdWUob1ZhbHVlKSB7XG4gIHJldHVybiAob1ZhbHVlIC0gOCkgKiAzICsgMjU7XG59XG5cbmZ1bmN0aW9uIGZyb21PcmlnYW1pVGVuc2lvbkFuZEZyaWN0aW9uKFxuICB0ZW5zaW9uOiBudW1iZXIsXG4gIGZyaWN0aW9uOiBudW1iZXIsXG4pOiBTcHJpbmdDb25maWdUeXBlIHtcbiAgcmV0dXJuIHtcbiAgICBzdGlmZm5lc3M6IHN0aWZmbmVzc0Zyb21PcmlnYW1pVmFsdWUodGVuc2lvbiksXG4gICAgZGFtcGluZzogZGFtcGluZ0Zyb21PcmlnYW1pVmFsdWUoZnJpY3Rpb24pLFxuICB9O1xufVxuXG5mdW5jdGlvbiBmcm9tQm91bmNpbmVzc0FuZFNwZWVkKFxuICBib3VuY2luZXNzOiBudW1iZXIsXG4gIHNwZWVkOiBudW1iZXIsXG4pOiBTcHJpbmdDb25maWdUeXBlIHtcbiAgZnVuY3Rpb24gbm9ybWFsaXplKHZhbHVlLCBzdGFydFZhbHVlLCBlbmRWYWx1ZSkge1xuICAgIHJldHVybiAodmFsdWUgLSBzdGFydFZhbHVlKSAvIChlbmRWYWx1ZSAtIHN0YXJ0VmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvamVjdE5vcm1hbChuLCBzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIHN0YXJ0ICsgKG4gKiAoZW5kIC0gc3RhcnQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpbmVhckludGVycG9sYXRpb24odCwgc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiB0ICogZW5kICsgKDEgLSB0KSAqIHN0YXJ0O1xuICB9XG5cbiAgZnVuY3Rpb24gcXVhZHJhdGljT3V0SW50ZXJwb2xhdGlvbih0LCBzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIGxpbmVhckludGVycG9sYXRpb24oMiAqIHQgLSB0ICogdCwgc3RhcnQsIGVuZCk7XG4gIH1cblxuICBmdW5jdGlvbiBiM0ZyaWN0aW9uMSh4KSB7XG4gICAgcmV0dXJuICgwLjAwMDcgKiBNYXRoLnBvdyh4LCAzKSkgLVxuICAgICAgKDAuMDMxICogTWF0aC5wb3coeCwgMikpICsgMC42NCAqIHggKyAxLjI4O1xuICB9XG5cbiAgZnVuY3Rpb24gYjNGcmljdGlvbjIoeCkge1xuICAgIHJldHVybiAoMC4wMDAwNDQgKiBNYXRoLnBvdyh4LCAzKSkgLVxuICAgICAgKDAuMDA2ICogTWF0aC5wb3coeCwgMikpICsgMC4zNiAqIHggKyAyO1xuICB9XG5cbiAgZnVuY3Rpb24gYjNGcmljdGlvbjMoeCkge1xuICAgIHJldHVybiAoMC4wMDAwMDA0NSAqIE1hdGgucG93KHgsIDMpKSAtXG4gICAgICAoMC4wMDAzMzIgKiBNYXRoLnBvdyh4LCAyKSkgKyAwLjEwNzggKiB4ICsgNS44NDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGIzTm9ib3VuY2UodGVuc2lvbikge1xuICAgIGlmICh0ZW5zaW9uIDw9IDE4KSB7XG4gICAgICByZXR1cm4gYjNGcmljdGlvbjEodGVuc2lvbik7XG4gICAgfSBlbHNlIGlmICh0ZW5zaW9uID4gMTggJiYgdGVuc2lvbiA8PSA0NCkge1xuICAgICAgcmV0dXJuIGIzRnJpY3Rpb24yKHRlbnNpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYjNGcmljdGlvbjModGVuc2lvbik7XG4gICAgfVxuICB9XG5cbiAgdmFyIGIgPSBub3JtYWxpemUoYm91bmNpbmVzcyAvIDEuNywgMCwgMjApO1xuICBiID0gcHJvamVjdE5vcm1hbChiLCAwLCAwLjgpO1xuICB2YXIgcyA9IG5vcm1hbGl6ZShzcGVlZCAvIDEuNywgMCwgMjApO1xuICB2YXIgYm91bmN5VGVuc2lvbiA9IHByb2plY3ROb3JtYWwocywgMC41LCAyMDApO1xuICB2YXIgYm91bmN5RnJpY3Rpb24gPSBxdWFkcmF0aWNPdXRJbnRlcnBvbGF0aW9uKFxuICAgIGIsXG4gICAgYjNOb2JvdW5jZShib3VuY3lUZW5zaW9uKSxcbiAgICAwLjAxXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBzdGlmZm5lc3M6IHN0aWZmbmVzc0Zyb21PcmlnYW1pVmFsdWUoYm91bmN5VGVuc2lvbiksXG4gICAgZGFtcGluZzogZGFtcGluZ0Zyb21PcmlnYW1pVmFsdWUoYm91bmN5RnJpY3Rpb24pLFxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZnJvbU9yaWdhbWlUZW5zaW9uQW5kRnJpY3Rpb24sXG4gIGZyb21Cb3VuY2luZXNzQW5kU3BlZWQsXG59O1xuIl19