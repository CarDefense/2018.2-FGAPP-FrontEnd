739b62b8e089f428696ceac7432ce65a
var cov_z4xlawqcx=function(){var path='/home/biel/Documents/tests/CarDefense_FrontEnd/mobile/screens/tab_navigator/car_defense/screens/Feed.js',hash='cd856a159712643d89725d83c90d88385b453ca8',Function=function(){}.constructor,global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/home/biel/Documents/tests/CarDefense_FrontEnd/mobile/screens/tab_navigator/car_defense/screens/Feed.js',statementMap:{'0':{start:{line:9,column:21},end:{line:11,column:3}},'1':{start:{line:12,column:2},end:{line:15,column:3}},'2':{start:{line:13,column:4},end:{line:13,column:56}},'3':{start:{line:14,column:4},end:{line:14,column:11}},'4':{start:{line:17,column:16},end:{line:17,column:64}},'5':{start:{line:18,column:2},end:{line:18,column:13}},'6':{start:{line:19,column:2},end:{line:19,column:29}},'7':{start:{line:26,column:4},end:{line:26,column:15}},'8':{start:{line:27,column:4},end:{line:27,column:64}},'9':{start:{line:30,column:4},end:{line:30,column:65}},'10':{start:{line:34,column:4},end:{line:34,column:43}},'11':{start:{line:38,column:4},end:{line:38,column:17}},'12':{start:{line:39,column:4},end:{line:39,column:39}},'13':{start:{line:43,column:20},end:{line:43,column:41}},'14':{start:{line:44,column:16},end:{line:44,column:61}},'15':{start:{line:45,column:4},end:{line:45,column:22}},'16':{start:{line:46,column:4},end:{line:46,column:28}},'17':{start:{line:48,column:4},end:{line:48,column:22}},'18':{start:{line:49,column:23},end:{line:52,column:6}},'19':{start:{line:53,column:4},end:{line:53,column:30}},'20':{start:{line:54,column:4},end:{line:67,column:6}},'21':{start:{line:61,column:26},end:{line:61,column:48}},'22':{start:{line:63,column:6},end:{line:63,column:32}},'23':{start:{line:66,column:6},end:{line:66,column:24}},'24':{start:{line:72,column:4},end:{line:86,column:9}},'25':{start:{line:73,column:26},end:{line:73,column:41}},'26':{start:{line:76,column:8},end:{line:81,column:11}},'27':{start:{line:85,column:8},end:{line:85,column:29}},'28':{start:{line:90,column:4},end:{line:90,column:21}},'29':{start:{line:91,column:4},end:{line:91,column:22}},'30':{start:{line:95,column:4},end:{line:95,column:40}},'31':{start:{line:96,column:4},end:{line:98,column:7}},'32':{start:{line:97,column:6},end:{line:97,column:43}},'33':{start:{line:101,column:4},end:{line:126,column:6}},'34':{start:{line:113,column:12},end:{line:120,column:14}},'35':{start:{line:122,column:43},end:{line:122,column:45}},'36':{start:{line:130,column:15},end:{line:168,column:2}}},fnMap:{'0':{name:'register',decl:{start:{line:8,column:15},end:{line:8,column:23}},loc:{start:{line:8,column:26},end:{line:21,column:1}},line:8},'1':{name:'(anonymous_1)',decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:23},end:{line:28,column:3}},line:25},'2':{name:'(anonymous_2)',decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:25},end:{line:31,column:3}},line:29},'3':{name:'(anonymous_3)',decl:{start:{line:33,column:11},end:{line:33,column:12}},loc:{start:{line:33,column:33},end:{line:35,column:3}},line:33},'4':{name:'(anonymous_4)',decl:{start:{line:37,column:2},end:{line:37,column:3}},loc:{start:{line:37,column:21},end:{line:40,column:3}},line:37},'5':{name:'(anonymous_5)',decl:{start:{line:42,column:15},end:{line:42,column:16}},loc:{start:{line:42,column:21},end:{line:69,column:3}},line:42},'6':{name:'(anonymous_6)',decl:{start:{line:61,column:12},end:{line:61,column:13}},loc:{start:{line:61,column:24},end:{line:61,column:50}},line:61},'7':{name:'(anonymous_7)',decl:{start:{line:62,column:11},end:{line:62,column:12}},loc:{start:{line:62,column:27},end:{line:64,column:5}},line:62},'8':{name:'(anonymous_8)',decl:{start:{line:65,column:12},end:{line:65,column:13}},loc:{start:{line:65,column:21},end:{line:67,column:5}},line:65},'9':{name:'(anonymous_9)',decl:{start:{line:71,column:16},end:{line:71,column:17}},loc:{start:{line:71,column:22},end:{line:87,column:3}},line:71},'10':{name:'(anonymous_10)',decl:{start:{line:73,column:12},end:{line:73,column:13}},loc:{start:{line:73,column:26},end:{line:73,column:41}},line:73},'11':{name:'(anonymous_11)',decl:{start:{line:74,column:12},end:{line:74,column:13}},loc:{start:{line:74,column:30},end:{line:83,column:7}},line:74},'12':{name:'(anonymous_12)',decl:{start:{line:79,column:11},end:{line:79,column:12}},loc:{start:{line:79,column:23},end:{line:81,column:9}},line:79},'13':{name:'(anonymous_13)',decl:{start:{line:84,column:13},end:{line:84,column:14}},loc:{start:{line:84,column:24},end:{line:86,column:7}},line:84},'14':{name:'(anonymous_14)',decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:28},end:{line:92,column:3}},line:89},'15':{name:'(anonymous_15)',decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:21},end:{line:99,column:3}},line:94},'16':{name:'(anonymous_16)',decl:{start:{line:96,column:34},end:{line:96,column:35}},loc:{start:{line:96,column:40},end:{line:98,column:5}},line:96},'17':{name:'(anonymous_17)',decl:{start:{line:100,column:2},end:{line:100,column:3}},loc:{start:{line:100,column:11},end:{line:127,column:3}},line:100},'18':{name:'(anonymous_18)',decl:{start:{line:112,column:22},end:{line:112,column:23}},loc:{start:{line:112,column:36},end:{line:121,column:11}},line:112},'19':{name:'(anonymous_19)',decl:{start:{line:122,column:24},end:{line:122,column:25}},loc:{start:{line:122,column:43},end:{line:122,column:45}},line:122}},branchMap:{'0':{loc:{start:{line:12,column:2},end:{line:15,column:3}},type:'if',locations:[{start:{line:12,column:2},end:{line:15,column:3}},{start:{line:12,column:2},end:{line:15,column:3}}],line:12},'1':{loc:{start:{line:30,column:4},end:{line:30,column:64}},type:'binary-expr',locations:[{start:{line:30,column:4},end:{line:30,column:17}},{start:{line:30,column:21},end:{line:30,column:64}}],line:30},'2':{loc:{start:{line:44,column:16},end:{line:44,column:61}},type:'cond-expr',locations:[{start:{line:44,column:31},end:{line:44,column:49}},{start:{line:44,column:52},end:{line:44,column:61}}],line:44}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0},b:{'0':[0,0],'1':[0,0],'2':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require('react-native');var _jwtDecode=require('jwt-decode');var _jwtDecode2=_interopRequireDefault(_jwtDecode);var _Const=require('./TabNavigator/const/Const.js');var _expo=require('expo');var _expo2=_interopRequireDefault(_expo);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var tk;function register(){var _ref,status,value;return regeneratorRuntime.async(function register$(_context){while(1){switch(_context.prev=_context.next){case 0:cov_z4xlawqcx.f[0]++;cov_z4xlawqcx.s[0]++;_context.next=4;return regeneratorRuntime.awrap(_expo2.default.Permissions.askAsync(_expo2.default.Permissions.NOTIFICATIONS));case 4:_ref=_context.sent;status=_ref.status;cov_z4xlawqcx.s[1]++;if(!(status!='granted')){_context.next=15;break;}cov_z4xlawqcx.b[0][0]++;cov_z4xlawqcx.s[2]++;alert('You need to enable permissions in settings');cov_z4xlawqcx.s[3]++;return _context.abrupt('return');case 15:cov_z4xlawqcx.b[0][1]++;case 16:cov_z4xlawqcx.s[4]++;_context.next=19;return regeneratorRuntime.awrap(_expo2.default.Notifications.getExpoPushTokenAsync());case 19:value=_context.sent;cov_z4xlawqcx.s[5]++;tk=value;cov_z4xlawqcx.s[6]++;console.log(status,value);case 24:case'end':return _context.stop();}}},null,this);}var Feed=function(_ref2){_inherits(Feed,_ref2);_createClass(Feed,[{key:'componentWillMount',value:function componentWillMount(){cov_z4xlawqcx.f[1]++;cov_z4xlawqcx.s[7]++;register();cov_z4xlawqcx.s[8]++;this.listener=_expo2.default.Notifications.addListener(this.listen);}},{key:'componentWillUnmount',value:function componentWillUnmount(){cov_z4xlawqcx.f[2]++;cov_z4xlawqcx.s[9]++;(cov_z4xlawqcx.b[1][0]++,this.listener)&&(cov_z4xlawqcx.b[1][1]++,_expo2.default.Notifications.addListener(this.listen));}}]);function Feed(props){_classCallCheck(this,Feed);cov_z4xlawqcx.f[4]++;cov_z4xlawqcx.s[11]++;var _this=_possibleConstructorReturn(this,(Feed.__proto__||Object.getPrototypeOf(Feed)).call(this,props));_this.listen=function(_ref3){var origin=_ref3.origin,data=_ref3.data;cov_z4xlawqcx.f[3]++;cov_z4xlawqcx.s[10]++;console.log('cool data',origin,data);};_this.sendIdData=function(){cov_z4xlawqcx.f[5]++;var _ref4=(cov_z4xlawqcx.s[13]++,_this.props.navigation),state=_ref4.state;var token=(cov_z4xlawqcx.s[14]++,state.params?(cov_z4xlawqcx.b[2][0]++,state.params.token):(cov_z4xlawqcx.b[2][1]++,undefined));cov_z4xlawqcx.s[15]++;console.log(token);cov_z4xlawqcx.s[16]++;user=(0,_jwtDecode2.default)(token);cov_z4xlawqcx.s[17]++;console.log(token);var notification=(cov_z4xlawqcx.s[18]++,JSON.stringify({id_token:user.user_id,notification_token:tk}));cov_z4xlawqcx.s[19]++;console.log(notification);cov_z4xlawqcx.s[20]++;fetch(_Const.PROFILE_API+'/set_token/',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:notification}).then(function(response){cov_z4xlawqcx.f[6]++;cov_z4xlawqcx.s[21]++;return response.json();}).then(function(jsonResponse){cov_z4xlawqcx.f[7]++;cov_z4xlawqcx.s[22]++;console.log(jsonResponse);}).catch(function(error){cov_z4xlawqcx.f[8]++;cov_z4xlawqcx.s[23]++;console.log(error);});};_this.getFeedInfo=function(){cov_z4xlawqcx.f[9]++;cov_z4xlawqcx.s[24]++;return fetch(_Const.NOTIFICATIONS_API+'/emergencynotifications/').then(function(response){cov_z4xlawqcx.f[10]++;cov_z4xlawqcx.s[25]++;return response.json();}).then(function(responseJson){cov_z4xlawqcx.f[11]++;cov_z4xlawqcx.s[26]++;_this.setState({isLoading:false,dataSource:responseJson},function(){cov_z4xlawqcx.f[12]++;});}).catch(function(error){cov_z4xlawqcx.f[13]++;cov_z4xlawqcx.s[27]++;console.error(error);});};_this._onRefresh=function(){cov_z4xlawqcx.f[15]++;cov_z4xlawqcx.s[30]++;_this.setState({refreshing:true});cov_z4xlawqcx.s[31]++;_this.componentDidMount().then(function(){cov_z4xlawqcx.f[16]++;cov_z4xlawqcx.s[32]++;_this.setState({refreshing:false});});};cov_z4xlawqcx.s[12]++;_this.state={refreshing:false};return _this;}_createClass(Feed,[{key:'componentDidMount',value:function componentDidMount(){return regeneratorRuntime.async(function componentDidMount$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cov_z4xlawqcx.f[14]++;cov_z4xlawqcx.s[28]++;this.sendIdData();cov_z4xlawqcx.s[29]++;this.getFeedInfo();case 5:case'end':return _context2.stop();}}},null,this);}},{key:'render',value:function render(){cov_z4xlawqcx.f[17]++;cov_z4xlawqcx.s[33]++;return _react2.default.createElement(_reactNative.ScrollView,{style:styles.item,refreshControl:_react2.default.createElement(_reactNative.RefreshControl,{refreshing:this.state.refreshing,onRefresh:this._onRefresh})},_react2.default.createElement(_reactNative.FlatList,{data:this.state.dataSource,renderItem:function renderItem(_ref5){var item=_ref5.item;cov_z4xlawqcx.f[18]++;cov_z4xlawqcx.s[34]++;return _react2.default.createElement(_reactNative.View,{style:styles.item2},_react2.default.createElement(_reactNative.Text,{style:styles.text1},item.title),_react2.default.createElement(_reactNative.Image,{source:{uri:item.image},style:{width:400,height:200}}),_react2.default.createElement(_reactNative.Text,{style:styles.text},item.message));},keyExtractor:function keyExtractor(_ref6,index){var id=_ref6.id;cov_z4xlawqcx.f[19]++;cov_z4xlawqcx.s[35]++;return id;}}));}}]);return Feed;}((_react2.default.Component));exports.default=Feed;var styles=(cov_z4xlawqcx.s[36]++,_reactNative.StyleSheet.create({item:{backgroundColor:"#ffffff",margin:4,shadowColor:"#000000",shadowOpacity:0.8,shadowRadius:2,shadowOffset:{height:1,width:1},elevation:4},item2:{alignItems:"center",justifyContent:'center',backgroundColor:"#ffffff",flexGrow:1,margin:4,padding:20,borderRadius:10,shadowColor:"#000000",shadowOpacity:0.8,shadowRadius:2,shadowOffset:{height:1,width:1},elevation:4},text:{color:"#540b71",fontWeight:'100'},text1:{color:"#540b71",fontWeight:'bold'}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZlZWQuanMiXSwibmFtZXMiOlsidGsiLCJyZWdpc3RlciIsIkV4cG8iLCJQZXJtaXNzaW9ucyIsImFza0FzeW5jIiwiTk9USUZJQ0FUSU9OUyIsInN0YXR1cyIsImFsZXJ0IiwiTm90aWZpY2F0aW9ucyIsImdldEV4cG9QdXNoVG9rZW5Bc3luYyIsInZhbHVlIiwiY29uc29sZSIsImxvZyIsIkZlZWQiLCJsaXN0ZW5lciIsImFkZExpc3RlbmVyIiwibGlzdGVuIiwicHJvcHMiLCJvcmlnaW4iLCJkYXRhIiwic2VuZElkRGF0YSIsIm5hdmlnYXRpb24iLCJzdGF0ZSIsInRva2VuIiwicGFyYW1zIiwidW5kZWZpbmVkIiwidXNlciIsIm5vdGlmaWNhdGlvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJpZF90b2tlbiIsInVzZXJfaWQiLCJub3RpZmljYXRpb25fdG9rZW4iLCJmZXRjaCIsIlBST0ZJTEVfQVBJIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwianNvblJlc3BvbnNlIiwiY2F0Y2giLCJlcnJvciIsImdldEZlZWRJbmZvIiwiTk9USUZJQ0FUSU9OU19BUEkiLCJyZXNwb25zZUpzb24iLCJzZXRTdGF0ZSIsImlzTG9hZGluZyIsImRhdGFTb3VyY2UiLCJfb25SZWZyZXNoIiwicmVmcmVzaGluZyIsImNvbXBvbmVudERpZE1vdW50Iiwic3R5bGVzIiwiaXRlbSIsIml0ZW0yIiwidGV4dDEiLCJ0aXRsZSIsInVyaSIsImltYWdlIiwid2lkdGgiLCJoZWlnaHQiLCJ0ZXh0IiwibWVzc2FnZSIsImluZGV4IiwiaWQiLCJSZWFjdCIsIkNvbXBvbmVudCIsIlN0eWxlU2hlZXQiLCJjcmVhdGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJtYXJnaW4iLCJzaGFkb3dDb2xvciIsInNoYWRvd09wYWNpdHkiLCJzaGFkb3dSYWRpdXMiLCJzaGFkb3dPZmZzZXQiLCJlbGV2YXRpb24iLCJhbGlnbkl0ZW1zIiwianVzdGlmeUNvbnRlbnQiLCJmbGV4R3JvdyIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJjb2xvciIsImZvbnRXZWlnaHQiXSwibWFwcGluZ3MiOiJrcE9BQUEsNEIsMkNBQ0EseUNBQ0EscUMsbURBQ0Esb0RBQ0EsMEIsMDZCQUNBLEdBQUlBLEdBQUosQ0FFQSxRQUFlQyxTQUFmLG9PQUMyQkMsZUFBS0MsV0FBTCxDQUFpQkMsUUFBakIsQ0FDdkJGLGVBQUtDLFdBQUwsQ0FBaUJFLGFBRE0sQ0FEM0IsNEJBQ1VDLE1BRFYsTUFDVUEsTUFEViwyQkFJTUEsUUFBVSxTQUpoQix3RUFLSUMsTUFBTSw0Q0FBTixFQUxKLG9LQVNzQkwsZUFBS00sYUFBTCxDQUFtQkMscUJBQW5CLEVBVHRCLFVBU1FDLEtBVFIsb0NBVUVWLEdBQUtVLEtBQUwsQ0FWRixxQkFXRUMsUUFBUUMsR0FBUixDQUFZTixNQUFaLENBQW9CSSxLQUFwQixFQVhGLHlELEdBZXFCRyxLLHVIQUVFLDJDQUNuQlosV0FEbUIscUJBRW5CLEtBQUthLFFBQUwsQ0FBZ0JaLGVBQUtNLGFBQUwsQ0FBbUJPLFdBQW5CLENBQStCLEtBQUtDLE1BQXBDLENBQWhCLENBQ0QsQyxtRUFDc0IsMkNBQ3JCLDhCQUFLRixRQUFMLDRCQUFpQlosZUFBS00sYUFBTCxDQUFtQk8sV0FBbkIsQ0FBK0IsS0FBS0MsTUFBcEMsQ0FBakIsRUFDRCxDLElBTUQsY0FBWUMsS0FBWixDQUFtQix5S0FDWEEsS0FEVyxTQUpuQkQsTUFJbUIsQ0FKVixlQUFzQixJQUFuQkUsT0FBbUIsT0FBbkJBLE1BQW1CLENBQVhDLElBQVcsT0FBWEEsSUFBVyw0Q0FDN0JSLFFBQVFDLEdBQVIsQ0FBWSxXQUFaLENBQXlCTSxNQUF6QixDQUFpQ0MsSUFBakMsRUFDRCxDQUVrQixPQUtuQkMsVUFMbUIsQ0FLTixVQUFNLHVEQUNELE1BQUtILEtBQUwsQ0FBV0ksVUFEVixFQUNWQyxLQURVLE9BQ1ZBLEtBRFUsQ0FFakIsR0FBSUMsOEJBQVFELE1BQU1FLE1BQU4sMEJBQWVGLE1BQU1FLE1BQU4sQ0FB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QSx1REFBRUEsQ0FackMsRUFSRixDQURGLENBMEJELEMsbUJBeEcrQkMsZ0JBQU1DLFMsbUJBQW5CdEQsSSxDQTJHckIsR0FBTXdDLCtCQUFTZSx3QkFBV0MsTUFBWCxDQUFrQixDQUMvQmYsS0FBTSxDQUNKZ0IsZ0JBQWlCLFNBRGIsQ0FFSkMsT0FBUSxDQUZKLENBR0pDLFlBQWEsU0FIVCxDQUlKQyxjQUFlLEdBSlgsQ0FLSkMsYUFBYyxDQUxWLENBTUpDLGFBQWMsQ0FDWmQsT0FBUSxDQURJLENBRVpELE1BQU8sQ0FGSyxDQU5WLENBVUpnQixVQUFXLENBVlAsQ0FEeUIsQ0FhL0JyQixNQUFPLENBQ0xzQixXQUFZLFFBRFAsQ0FFTEMsZUFBZ0IsUUFGWCxDQUdMUixnQkFBaUIsU0FIWixDQUlMUyxTQUFVLENBSkwsQ0FLTFIsT0FBUSxDQUxILENBTUxTLFFBQVMsRUFOSixDQU9MQyxhQUFjLEVBUFQsQ0FRTFQsWUFBYSxTQVJSLENBU0xDLGNBQWUsR0FUVixDQVVMQyxhQUFjLENBVlQsQ0FXTEMsYUFBYyxDQUNaZCxPQUFRLENBREksQ0FFWkQsTUFBTyxDQUZLLENBWFQsQ0FlTGdCLFVBQVcsQ0FmTixDQWJ3QixDQThCL0JkLEtBQU0sQ0FDSm9CLE1BQU8sU0FESCxDQUVKQyxXQUFZLEtBRlIsQ0E5QnlCLENBa0MvQjNCLE1BQU8sQ0FDTDBCLE1BQU8sU0FERixDQUVMQyxXQUFZLE1BRlAsQ0FsQ3dCLENBQWxCLENBQVQsQ0FBTiIsImZpbGUiOiJGZWVkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZsYXRMaXN0LCBUZXh0LCBWaWV3LCBTdHlsZVNoZWV0LCBTY3JvbGxWaWV3LCBSZWZyZXNoQ29udHJvbCwgSW1hZ2UgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IGp3dF9kZWNvZGUgZnJvbSAnand0LWRlY29kZSc7XG5pbXBvcnQgeyBOT1RJRklDQVRJT05TX0FQSSwgUFJPRklMRV9BUEkgfSBmcm9tICcuL1RhYk5hdmlnYXRvci9jb25zdC9Db25zdC5qcydcbmltcG9ydCBFeHBvIGZyb20gJ2V4cG8nXG52YXIgdGtcblxuYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXIoKSB7XG4gIGNvbnN0IHsgc3RhdHVzIH0gPSBhd2FpdCBFeHBvLlBlcm1pc3Npb25zLmFza0FzeW5jKFxuICAgIEV4cG8uUGVybWlzc2lvbnMuTk9USUZJQ0FUSU9OU1xuICApO1xuICBpZiAoc3RhdHVzICE9ICdncmFudGVkJykge1xuICAgIGFsZXJ0KCdZb3UgbmVlZCB0byBlbmFibGUgcGVybWlzc2lvbnMgaW4gc2V0dGluZ3MnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB2YWx1ZSA9IGF3YWl0IEV4cG8uTm90aWZpY2F0aW9ucy5nZXRFeHBvUHVzaFRva2VuQXN5bmMoKTtcbiAgdGsgPSB2YWx1ZTtcbiAgY29uc29sZS5sb2coc3RhdHVzLCB2YWx1ZSk7XG4gIFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGZWVkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICByZWdpc3RlcigpO1xuICAgIHRoaXMubGlzdGVuZXIgPSBFeHBvLk5vdGlmaWNhdGlvbnMuYWRkTGlzdGVuZXIodGhpcy5saXN0ZW4pO1xuICB9XG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMubGlzdGVuZXIgJiYgRXhwby5Ob3RpZmljYXRpb25zLmFkZExpc3RlbmVyKHRoaXMubGlzdGVuKTtcbiAgfVxuXG4gIGxpc3RlbiA9ICh7IG9yaWdpbiwgZGF0YSB9KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2Nvb2wgZGF0YScsIG9yaWdpbiwgZGF0YSk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0geyByZWZyZXNoaW5nOiBmYWxzZSwgfVxuICB9XG5cbiAgc2VuZElkRGF0YSA9ICgpID0+IHtcbiAgICBjb25zdCB7c3RhdGV9ID0gdGhpcy5wcm9wcy5uYXZpZ2F0aW9uO1xuICAgIHZhciB0b2tlbiA9IHN0YXRlLnBhcmFtcyA/IHN0YXRlLnBhcmFtcy50b2tlbiA6IHVuZGVmaW5lZDtcbiAgICBjb25zb2xlLmxvZyh0b2tlbilcbiAgICB1c2VyID0gand0X2RlY29kZSh0b2tlbilcbiAgICAgIFxuICAgIGNvbnNvbGUubG9nKHRva2VuKVxuICAgIGxldCBub3RpZmljYXRpb24gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBpZF90b2tlbjogdXNlci51c2VyX2lkLFxuICAgICAgbm90aWZpY2F0aW9uX3Rva2VuOiB0ayxcbiAgICB9KVxuICAgIGNvbnNvbGUubG9nKG5vdGlmaWNhdGlvbik7XG4gICAgZmV0Y2goUFJPRklMRV9BUEkgKyAnL3NldF90b2tlbi8nLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBub3RpZmljYXRpb25cbiAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsgcmV0dXJuIHJlc3BvbnNlLmpzb24oKSB9XG4gICAgKS50aGVuKGpzb25SZXNwb25zZSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhqc29uUmVzcG9uc2UpO1xuICAgIH1cbiAgICApLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgIH0pXG5cbiAgfVxuXG4gIGdldEZlZWRJbmZvID0gKCkgPT4ge1xuICAgIHJldHVybiBmZXRjaChOT1RJRklDQVRJT05TX0FQSSArICcvZW1lcmdlbmN5bm90aWZpY2F0aW9ucy8nKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAudGhlbigocmVzcG9uc2VKc29uKSA9PiB7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICBkYXRhU291cmNlOiByZXNwb25zZUpzb24sXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB9KTtcblxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2VuZElkRGF0YSgpXG4gICAgdGhpcy5nZXRGZWVkSW5mbygpXG4gIH1cblxuICBfb25SZWZyZXNoID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyByZWZyZXNoaW5nOiB0cnVlIH0pO1xuICAgIHRoaXMuY29tcG9uZW50RGlkTW91bnQoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyByZWZyZXNoaW5nOiBmYWxzZSB9KTtcbiAgICB9KTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTY3JvbGxWaWV3IHN0eWxlPXtzdHlsZXMuaXRlbX1cbiAgICAgICAgcmVmcmVzaENvbnRyb2w9e1xuICAgICAgICAgIDxSZWZyZXNoQ29udHJvbFxuICAgICAgICAgICAgcmVmcmVzaGluZz17dGhpcy5zdGF0ZS5yZWZyZXNoaW5nfVxuICAgICAgICAgICAgb25SZWZyZXNoPXt0aGlzLl9vblJlZnJlc2h9XG4gICAgICAgICAgLz5cbiAgICAgICAgfVxuICAgICAgPlxuICAgICAgICA8RmxhdExpc3RcbiAgICAgICAgICBkYXRhPXt0aGlzLnN0YXRlLmRhdGFTb3VyY2V9XG4gICAgICAgICAgcmVuZGVySXRlbT17KHsgaXRlbSB9KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLml0ZW0yfT5cbiAgICAgICAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLnRleHQxfT57aXRlbS50aXRsZX08L1RleHQ+XG4gICAgICAgICAgICAgICAgPEltYWdlIHNvdXJjZT17e3VyaTppdGVtLmltYWdlfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IDQwMCwgaGVpZ2h0OiAyMDB9fSAvPlxuICAgICAgICAgICAgICAgIDxUZXh0IHN0eWxlPXtzdHlsZXMudGV4dH0+e2l0ZW0ubWVzc2FnZX08L1RleHQ+XG4gICAgICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBrZXlFeHRyYWN0b3I9eyh7IGlkIH0sIGluZGV4KSA9PiBpZH1cblxuICAgICAgICAvPlxuICAgICAgPC9TY3JvbGxWaWV3PlxuICAgICk7XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBpdGVtOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiBcIiNmZmZmZmZcIixcbiAgICBtYXJnaW46IDQsXG4gICAgc2hhZG93Q29sb3I6IFwiIzAwMDAwMFwiLFxuICAgIHNoYWRvd09wYWNpdHk6IDAuOCxcbiAgICBzaGFkb3dSYWRpdXM6IDIsXG4gICAgc2hhZG93T2Zmc2V0OiB7XG4gICAgICBoZWlnaHQ6IDEsXG4gICAgICB3aWR0aDogMVxuICAgIH0sXG4gICAgZWxldmF0aW9uOiA0XG4gIH0sXG4gIGl0ZW0yOiB7XG4gICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYmFja2dyb3VuZENvbG9yOiBcIiNmZmZmZmZcIixcbiAgICBmbGV4R3JvdzogMSxcbiAgICBtYXJnaW46IDQsXG4gICAgcGFkZGluZzogMjAsXG4gICAgYm9yZGVyUmFkaXVzOiAxMCxcbiAgICBzaGFkb3dDb2xvcjogXCIjMDAwMDAwXCIsXG4gICAgc2hhZG93T3BhY2l0eTogMC44LFxuICAgIHNoYWRvd1JhZGl1czogMixcbiAgICBzaGFkb3dPZmZzZXQ6IHtcbiAgICAgIGhlaWdodDogMSxcbiAgICAgIHdpZHRoOiAxXG4gICAgfSxcbiAgICBlbGV2YXRpb246IDRcbiAgfSxcbiAgdGV4dDoge1xuICAgIGNvbG9yOiBcIiM1NDBiNzFcIixcbiAgICBmb250V2VpZ2h0OiAnMTAwJ1xuICB9LFxuICB0ZXh0MToge1xuICAgIGNvbG9yOiBcIiM1NDBiNzFcIixcbiAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gIH1cbn0pO1xuIl19