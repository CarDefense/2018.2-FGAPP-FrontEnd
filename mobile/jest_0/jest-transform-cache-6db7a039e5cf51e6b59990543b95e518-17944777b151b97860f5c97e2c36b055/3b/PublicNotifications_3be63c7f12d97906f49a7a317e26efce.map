{"version":3,"sources":["PublicNotifications.js"],"names":["tk","register","Expo","Permissions","askAsync","NOTIFICATIONS","status","alert","Notifications","getExpoPushTokenAsync","value","console","log","PublicNotifications","listener","addListener","listen","props","origin","data","onPressButton","errors","url","NOTIFICATIONS_API","i","forEach","text","length","notification","JSON","stringify","sender_id","title","state","message","image","fetch","method","headers","body","then","response","json","jsonResponse","catch","error","Alert","setState","_maybeRenderUploadingOverlay","uploading","styles","maybeRenderUploading","_maybeRenderImage","maybeRenderContainer","maybeRenderImageContainer","uri","maybeRenderImage","_share","Share","share","_copyToClipboard","Clipboard","setString","_takePhoto","CAMERA","cameraPerm","CAMERA_ROLL","cameraRollPerm","ImagePicker","launchCameraAsync","allowsEditing","pickerResult","_handleImagePicked","_pickImage","launchImageLibraryAsync","uploadResponse","uploadResult","cancelled","uploadImageAsync","e","messageRef","updateRef","bind","onFocus","ref","isFocused","words","map","container","header","alternativeLayoutButtonContainer","button","width","color","fontWeight","button2","container1","button3","Component","apiUrl","uriParts","split","fileType","formData","FormData","append","name","type","options","Accept","StyleSheet","create","paddingLeft","paddingRight","paddingTop","flexDirection","justifyContent","backgroundColor","borderRadius","height","alignItems","textAlign","fontSize","marginTop","elevation","shadowColor","shadowOpacity","shadowOffset","shadowRadius","borderTopLeftRadius","borderTopRightRadius","overflow"],"mappings":"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","file":"PublicNotifications.js","sourcesContent":["import { TextField } from 'react-native-material-textfield';;\nimport { Constants, ImagePicker, Permissions } from 'expo';\nimport React, { Component } from 'react';\nimport {\n  ActivityIndicator,\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TextInput,\n  TouchableOpacity,\n  Button,\n  Alert,\n  Image\n} from 'react-native';\nimport { NOTIFICATIONS_API } from '../const/Const'\n\n\nvar tk\nasync function register() {\n  const { status } = await Expo.Permissions.askAsync(\n    Expo.Permissions.NOTIFICATIONS\n  );\n  if (status != 'granted') {\n    alert('You need to enable permissions in settings');\n    return;\n  }\n\n  const value = await Expo.Notifications.getExpoPushTokenAsync();\n  tk = value;\n  console.log(status, value);\n}\n\nexport default class PublicNotifications extends Component {\n  componentWillMount() {\n    register();\n    this.listener = Expo.Notifications.addListener(this.listen);\n  }\n  componentWillUnmount() {\n    this.listener && Expo.Notifications.addListener(this.listen);\n  }\n\n  listen = ({ origin, data }) => {\n    console.log('cool data', origin, data);\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.messageRef = this.updateRef.bind(this, 'message');\n    this.onFocus = this.onFocus.bind(this);\n\n    this.state = {\n      title: 'Alerta Geral',\n      message: '',\n      image: null,\n      uploading: false,\n    }\n  }\n\n  onFocus() {\n    let { errors = {} } = this.state;\n\n    for (let text in errors) {\n      let ref = this[text];\n\n      if (ref && ref.isFocused()) {\n        delete errors[text];\n      }\n    }\n\n    this.setState({ errors });\n  }\n\n  onChangeText(words) {\n    ['message']\n    .map((text) => ({ text, ref: this[text] }))\n    .forEach(({ text, ref }) => {\n      if (ref && ref.isFocused()) {\n        this.setState({ [text]: words });\n      }\n    });\n  }\n\n  // onSubmitFirstName() {\n  //   this.lastname.focus();\n  // }\n\n  onPressButton = () => {\n    let errors = {};\n    const url = NOTIFICATIONS_API + '/send_emergency_push_message/' //function send_emergency_push_message url\n    let i = 0;\n\n    ['message']\n    .forEach((text) => {\n      let value = this[text].value();\n\n      if (!value) {\n        errors[text] = 'Campo obrigatório.';\n        i+=1;\n      } else {\n        if ('message' === text && value.length < 5) {\n          errors[text] = 'Forneça mais detalhes do ocorrido.';\n          i+=1;\n        }\n      }\n    });\n\n    if (i == 0) {\n      let notification = JSON.stringify({\n        sender_id: tk,\n        title: this.state.title,\n        message: this.state.message,\n        image: this.state.image\n      })\n\n      console.log(notification);\n\n      fetch(url, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: notification\n      }).then(response => { return response.json() }\n      ).then(jsonResponse => {\n        console.log(jsonResponse);\n      }\n      ).catch(error => {\n        console.log(error)\n      })\n      Alert.alert(\"Alerta enviado!\")\n    }\n\n    this.setState({ errors });\n  }\n\n  updateRef(text, ref) {\n    this[text] = ref;\n  }\n\n  render() {\n    let { image } = this.state;\n    let { errors = {}, ...data} = this.state;\n    let {message = 'text'} = data;\n\n    return (\n      <ScrollView>\n        <View style={styles.container}>\n          <Text style={styles.header}>Alerta</Text>\n          <TextField\n            ref={this.messageRef}\n            value={data.message}\n            autoCorrect={false}\n            enablesReturnKeyAutomatically={true}\n            onFocus={this.onFocus}\n            onChangeText={ (message) => this.setState({ message }) }\n            // onChangeText={this.onChangeText}\n            // onSubmitEditing={this.onSubmitMessage}\n            returnKeyType='next'\n            label='Descrição'\n            tintColor = '#760f9f'\n            error={errors.message}\n          />\n          <Text style={styles.text}>Adicionar imagem</Text>\n          <View style={styles.alternativeLayoutButtonContainer}>\n            <TouchableOpacity\n              style={styles.button}\n              color='#760f9f'\n              onPress={this._takePhoto}\n              containerViewStyle={{ width: '73.25%' }}\n            >\n              <Text style={{ color: 'white', fontWeight: 'bold'}} >CAMERA</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={styles.button2}\n              color='#540b71'\n              onPress={this._pickImage}\n              containerViewStyle={{ width: '73.25%' }}\n            >\n              <Text style={{ color: 'white', fontWeight: 'bold'}} >GALERIA</Text>\n            </TouchableOpacity>\n          </View>\n          {this._maybeRenderImage()}\n          {this._maybeRenderUploadingOverlay()}\n          <View style={styles.container1}>\n            <TouchableOpacity\n              style={styles.button3}\n              color='#760f9f'\n              onPress={this.onPressButton}\n              containerViewStyle={{ width: '73.25%' }}\n            >\n              <Text style={{ color: 'white', fontWeight: 'bold'}} >EMITIR ALERTA</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </ScrollView>\n    );\n  }\n\n  _maybeRenderUploadingOverlay = () => { //done\n    if (this.state.uploading) {\n      return (\n        <View\n          style={styles.maybeRenderUploading}>\n          <ActivityIndicator color=\"#540b71\" size=\"large\" />\n        </View>\n      );\n    }\n  };\n\n  _maybeRenderImage = () => { //done\n    let {\n      image\n    } = this.state;\n\n    if (!image) {\n      return;\n    }\n\n    // onPress={this._copyToClipboard}\n    // onLongPress={this._share}\n\n    return (\n      <View\n        style={styles.maybeRenderContainer}>\n        <View\n          style={styles.maybeRenderImageContainer}>\n          <Image source={{ uri: image }} style={styles.maybeRenderImage} />\n        </View>\n      </View>\n    );\n  };\n\n  _share = () => {\n    Share.share({\n      message: this.state.image,\n      title: 'Check out this photo',\n      url: this.state.image,\n    });\n  };\n\n  _copyToClipboard = () => {\n    Clipboard.setString(this.state.image);\n    alert('Copied image URL to clipboard');\n  };\n\n  _takePhoto = async () => {\n    const {\n      status: cameraPerm\n    } = await Permissions.askAsync(Permissions.CAMERA);\n\n    const {\n      status: cameraRollPerm\n    } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n\n  // only if user allows permission to camera AND camera roll\n    if (cameraPerm === 'granted' && cameraRollPerm === 'granted') {\n      let pickerResult = await ImagePicker.launchCameraAsync({\n        allowsEditing: true,\n      });\n\n      this._handleImagePicked(pickerResult);\n    }\n  };\n\n  _pickImage = async () => {\n    const {\n      status: cameraRollPerm\n    } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n\n  // only if user allows permission to camera roll\n    if (cameraRollPerm === 'granted') {\n      let pickerResult = await ImagePicker.launchImageLibraryAsync({\n        allowsEditing: true,\n\n      });\n\n      this._handleImagePicked(pickerResult);\n    }\n  };\n\n  _handleImagePicked = async pickerResult => {\n    let uploadResponse, uploadResult;\n\n    try {\n      this.setState({\n        uploading: true\n      });\n\n      if (!pickerResult.cancelled) {\n        uploadResponse = await uploadImageAsync(pickerResult.uri);\n        uploadResult = await uploadResponse.json();\n\n        console.log(uploadResult.image)\n\n        this.setState({\n          image: uploadResult.image\n        });\n      }\n    } catch (e) {\n      console.log({ uploadResponse });\n      console.log({ uploadResult });\n      console.log({ e });\n      alert('Upload failed, sorry :(');\n    } finally {\n      this.setState({\n      uploading: false\n      });\n    }\n  };\n}\n\n  async function uploadImageAsync(uri) {\n    let apiUrl = NOTIFICATIONS_API + '/notificationsimage/';\n\n    // Note:\n    // Uncomment this if you want to experiment with local server\n    //\n    // if (Constants.isDevice) {\n    //   apiUrl = `https://your-ngrok-subdomain.ngrok.io/upload`;\n    // } else {\n    //   apiUrl = `http://localhost:3000/upload`\n    // }\n\n    let uriParts = uri.split('.');\n    let fileType = uriParts[uriParts.length - 1];\n\n    let formData = new FormData();\n    formData.append('image', {\n      uri,\n      name: `photo.${fileType}`,\n      type: `image/${fileType}`,\n    });\n\n    console.log(uri)\n\n    let options = {\n      method: 'POST',\n      body: formData,\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'multipart/form-data',\n      },\n    };\n    return fetch(apiUrl, options);\n  }\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingLeft: 16,\n    paddingRight: 16\n  },\n  text: {\n    paddingTop: 16,\n    color: '#760f9f'\n  },\n  alternativeLayoutButtonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingTop: 4,\n    paddingRight: 4,\n  },\n  button: {\n    backgroundColor: '#760f9f',\n    borderRadius: 15,\n    height: 40,\n    width: '61%',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  button2: {\n    backgroundColor: '#540b71',\n    borderRadius: 15,\n    height: 40,\n    width: '33%',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  button3: {\n    backgroundColor: '#760f9f',\n    borderRadius: 15,\n    height: 40,\n    width: '73.25%',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  container1: {\n    paddingTop: 32,\n    flexDirection: 'row',\n    justifyContent: 'center'\n  },\n  header: {\n    color: \"#760f9f\",\n    textAlign: 'center',\n    fontWeight: '200',\n    fontSize: 50,\n    marginTop: 25\n  },\n  maybeRenderUploading: {\n    paddingTop: 8,\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.0)',\n    justifyContent: 'center',\n  },\n  maybeRenderContainer: {\n    width: '100%',\n    height: '40%',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 3,\n    elevation: 2,\n    marginTop: 32,\n    shadowColor: 'rgba(0,0,0,1)',\n    shadowOpacity: 0.2,\n    shadowOffset: {\n      height: 4,\n      width: 4,\n    },\n    shadowRadius: 5\n  },\n  maybeRenderImageContainer: {\n    borderTopLeftRadius: 3,\n    borderTopRightRadius: 3,\n    overflow: 'hidden',\n  },\n  maybeRenderImage: {\n    height: 250,\n    width: 250,\n  }\n});\n"]}