3ba46404f6d43264c89995942e05699b
'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp2;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ListView=require('ListView');var React=require('React');var RefreshControl=require('RefreshControl');var ScrollView=require('ScrollView');var invariant=require('fbjs/lib/invariant');var MetroListView=(_temp2=_class=function(_React$Component){_inherits(MetroListView,_React$Component);function MetroListView(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,MetroListView);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=MetroListView.__proto__||Object.getPrototypeOf(MetroListView)).call.apply(_ref,[this].concat(args))),_this),_this.state=_this._computeState(_this.props,{ds:new ListView.DataSource({rowHasChanged:function rowHasChanged(itemA,itemB){return true;},sectionHeaderHasChanged:function sectionHeaderHasChanged(){return true;},getSectionHeaderData:function getSectionHeaderData(dataBlob,sectionID){return _this.state.sectionHeaderData[sectionID];}}),sectionHeaderData:{}}),_this._captureRef=function(ref){_this._listRef=ref;},_this._renderFooter=function(){return React.createElement(_this2.props.FooterComponent,{key:'$footer'});},_this._renderRow=function(item,sectionID,rowID,highlightRow){return _this.props.renderItem({item:item,index:rowID});},_this._renderSectionHeader=function(section,sectionID){var renderSectionHeader=_this.props.renderSectionHeader;invariant(renderSectionHeader,'Must provide renderSectionHeader with sections prop');return renderSectionHeader({section:section});},_this._renderSeparator=function(sID,rID){return React.createElement(_this2.props.SeparatorComponent,{key:sID+rID});},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(MetroListView,[{key:'scrollToEnd',value:function scrollToEnd(params){throw new Error('scrollToEnd not supported in legacy ListView.');}},{key:'scrollToIndex',value:function scrollToIndex(params){throw new Error('scrollToIndex not supported in legacy ListView.');}},{key:'scrollToItem',value:function scrollToItem(params){throw new Error('scrollToItem not supported in legacy ListView.');}},{key:'scrollToLocation',value:function scrollToLocation(params){throw new Error('scrollToLocation not supported in legacy ListView.');}},{key:'scrollToOffset',value:function scrollToOffset(params){var animated=params.animated,offset=params.offset;this._listRef.scrollTo(this.props.horizontal?{x:offset,animated:animated}:{y:offset,animated:animated});}},{key:'getListRef',value:function getListRef(){return this._listRef;}},{key:'setNativeProps',value:function setNativeProps(props){if(this._listRef){this._listRef.setNativeProps(props);}}},{key:'UNSAFE_componentWillReceiveProps',value:function UNSAFE_componentWillReceiveProps(newProps){var _this3=this;this.setState(function(state){return _this3._computeState(newProps,state);});}},{key:'render',value:function render(){return React.createElement(ListView,_extends({},this.props,{dataSource:this.state.ds,ref:this._captureRef,renderRow:this._renderRow,renderFooter:this.props.FooterComponent&&this._renderFooter,renderSectionHeader:this.props.sections&&this._renderSectionHeader,renderSeparator:this.props.SeparatorComponent&&this._renderSeparator}));}},{key:'_computeState',value:function _computeState(props,state){var sectionHeaderData={};if(props.sections){invariant(!props.items,'Cannot have both sections and items props.');var _sections={};props.sections.forEach(function(sectionIn,ii){var sectionID='s'+ii;_sections[sectionID]=sectionIn.data;sectionHeaderData[sectionID]=sectionIn;});return{ds:state.ds.cloneWithRowsAndSections(_sections),sectionHeaderData:sectionHeaderData};}else{invariant(!props.sections,'Cannot have both sections and items props.');return{ds:state.ds.cloneWithRows(props.items),sectionHeaderData:sectionHeaderData};}}}]);return MetroListView;}(React.Component),_class.defaultProps={keyExtractor:function keyExtractor(item,index){return item.key||String(index);},renderScrollComponent:function renderScrollComponent(props){if(props.onRefresh){return React.createElement(ScrollView,_extends({},props,{refreshControl:React.createElement(RefreshControl,{refreshing:props.refreshing,onRefresh:props.onRefresh})}));}else{return React.createElement(ScrollView,props);}}},_temp2);module.exports=MetroListView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1ldHJvTGlzdFZpZXcuanMiXSwibmFtZXMiOlsiTGlzdFZpZXciLCJyZXF1aXJlIiwiUmVhY3QiLCJSZWZyZXNoQ29udHJvbCIsIlNjcm9sbFZpZXciLCJpbnZhcmlhbnQiLCJNZXRyb0xpc3RWaWV3Iiwic3RhdGUiLCJfY29tcHV0ZVN0YXRlIiwicHJvcHMiLCJkcyIsIkRhdGFTb3VyY2UiLCJyb3dIYXNDaGFuZ2VkIiwiaXRlbUEiLCJpdGVtQiIsInNlY3Rpb25IZWFkZXJIYXNDaGFuZ2VkIiwiZ2V0U2VjdGlvbkhlYWRlckRhdGEiLCJkYXRhQmxvYiIsInNlY3Rpb25JRCIsInNlY3Rpb25IZWFkZXJEYXRhIiwiX2NhcHR1cmVSZWYiLCJfbGlzdFJlZiIsInJlZiIsIl9yZW5kZXJGb290ZXIiLCJfcmVuZGVyUm93IiwiaXRlbSIsInJvd0lEIiwiaGlnaGxpZ2h0Um93IiwicmVuZGVySXRlbSIsImluZGV4IiwiX3JlbmRlclNlY3Rpb25IZWFkZXIiLCJzZWN0aW9uIiwicmVuZGVyU2VjdGlvbkhlYWRlciIsIl9yZW5kZXJTZXBhcmF0b3IiLCJzSUQiLCJySUQiLCJwYXJhbXMiLCJFcnJvciIsImFuaW1hdGVkIiwib2Zmc2V0Iiwic2Nyb2xsVG8iLCJob3Jpem9udGFsIiwieCIsInkiLCJzZXROYXRpdmVQcm9wcyIsIm5ld1Byb3BzIiwic2V0U3RhdGUiLCJGb290ZXJDb21wb25lbnQiLCJzZWN0aW9ucyIsIlNlcGFyYXRvckNvbXBvbmVudCIsIml0ZW1zIiwiZm9yRWFjaCIsInNlY3Rpb25JbiIsImlpIiwiZGF0YSIsImNsb25lV2l0aFJvd3NBbmRTZWN0aW9ucyIsImNsb25lV2l0aFJvd3MiLCJDb21wb25lbnQiLCJkZWZhdWx0UHJvcHMiLCJrZXlFeHRyYWN0b3IiLCJrZXkiLCJTdHJpbmciLCJyZW5kZXJTY3JvbGxDb21wb25lbnQiLCJvblJlZnJlc2giLCJyZWZyZXNoaW5nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBVUEsYSw4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QkFBQ3JELEtBQUQsQ0FBa0IsQ0FDdkMsR0FBSUEsTUFBTXNELFNBQVYsQ0FBcUIsQ0FDbkIsTUFDRSxxQkFBQyxVQUFELGFBQ010RCxLQUROLEVBRUUsZUFLRSxvQkFBQyxjQUFELEVBQ0UsV0FBWUEsTUFBTXVELFVBRHBCLENBRUUsVUFBV3ZELE1BQU1zRCxTQUZuQixFQVBKLEdBREYsQ0FlRCxDQWhCRCxJQWdCTyxDQUNMLE1BQU8scUJBQUMsVUFBRCxDQUFnQnRELEtBQWhCLENBQVAsQ0FDRCxDQUNGLENBdEJpQyxDLFNBa0d0Q3dELE9BQU9DLE9BQVAsQ0FBaUI1RCxhQUFqQiIsImZpbGUiOiJNZXRyb0xpc3RWaWV3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgTWV0cm9MaXN0Vmlld1xuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBMaXN0VmlldyA9IHJlcXVpcmUoJ0xpc3RWaWV3Jyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ1JlYWN0Jyk7XG5jb25zdCBSZWZyZXNoQ29udHJvbCA9IHJlcXVpcmUoJ1JlZnJlc2hDb250cm9sJyk7XG5jb25zdCBTY3JvbGxWaWV3ID0gcmVxdWlyZSgnU2Nyb2xsVmlldycpO1xuXG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudHlwZSBJdGVtID0gYW55O1xuXG50eXBlIE5vcm1hbFByb3BzID0ge1xuICBGb290ZXJDb21wb25lbnQ/OiBSZWFjdC5Db21wb25lbnRUeXBlPCo+LFxuICByZW5kZXJJdGVtOiAoaW5mbzogT2JqZWN0KSA9PiA/UmVhY3QuRWxlbWVudDxhbnk+LFxuICAvKiAkRmxvd0ZpeE1lKD49MC41My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiLHJlYWN0X25hdGl2ZV9vc3MpIFRoaXMgY29tbWVudFxuICAgKiBzdXBwcmVzc2VzIGFuIGVycm9yIHdoZW4gdXBncmFkaW5nIEZsb3cncyBzdXBwb3J0IGZvciBSZWFjdC4gVG8gc2VlIHRoZVxuICAgKiBlcnJvciBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgcmVuZGVyU2VjdGlvbkhlYWRlcj86ICh7c2VjdGlvbjogT2JqZWN0fSkgPT4gP1JlYWN0LkVsZW1lbnQ8YW55PixcbiAgU2VwYXJhdG9yQ29tcG9uZW50PzogP1JlYWN0LkNvbXBvbmVudFR5cGU8Kj4sIC8vIG5vdCBzdXBwb3J0ZWQgeWV0XG5cbiAgLy8gUHJvdmlkZSBlaXRoZXIgYGl0ZW1zYCBvciBgc2VjdGlvbnNgXG4gIGl0ZW1zPzogP0FycmF5PEl0ZW0+LCAvLyBCeSBkZWZhdWx0LCBhbiBJdGVtIGlzIGFzc3VtZWQgdG8gYmUge2tleTogc3RyaW5nfVxuICAvLyAkRmxvd0ZpeE1lIC0gU29tZXRoaW5nIGlzIGEgbGl0dGxlIG9mZiB3aXRoIHRoZSB0eXBlIEFycmF5PEl0ZW0+XG4gIHNlY3Rpb25zPzogP0FycmF5PHtrZXk6IHN0cmluZywgZGF0YTogQXJyYXk8SXRlbT59PixcblxuICAvKipcbiAgICogSWYgcHJvdmlkZWQsIGEgc3RhbmRhcmQgUmVmcmVzaENvbnRyb2wgd2lsbCBiZSBhZGRlZCBmb3IgXCJQdWxsIHRvIFJlZnJlc2hcIiBmdW5jdGlvbmFsaXR5LiBNYWtlXG4gICAqIHN1cmUgdG8gYWxzbyBzZXQgdGhlIGByZWZyZXNoaW5nYCBwcm9wIGNvcnJlY3RseS5cbiAgICovXG4gIG9uUmVmcmVzaD86ID9GdW5jdGlvbixcbiAgLyoqXG4gICAqIFNldCB0aGlzIHRydWUgd2hpbGUgd2FpdGluZyBmb3IgbmV3IGRhdGEgZnJvbSBhIHJlZnJlc2guXG4gICAqL1xuICByZWZyZXNoaW5nPzogYm9vbGVhbixcbiAgLyoqXG4gICAqIElmIHRydWUsIHJlbmRlcnMgaXRlbXMgbmV4dCB0byBlYWNoIG90aGVyIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHN0YWNrZWQgdmVydGljYWxseS5cbiAgICovXG4gIGhvcml6b250YWw/OiA/Ym9vbGVhbixcbn07XG50eXBlIERlZmF1bHRQcm9wcyA9IHtcbiAga2V5RXh0cmFjdG9yOiAoaXRlbTogSXRlbSwgaW5kZXg6IG51bWJlcikgPT4gc3RyaW5nLFxufTtcbnR5cGUgUHJvcHMgPSBOb3JtYWxQcm9wcyAmIERlZmF1bHRQcm9wcztcblxuLyoqXG4gKiBUaGlzIGlzIGp1c3QgYSB3cmFwcGVyIGFyb3VuZCB0aGUgbGVnYWN5IExpc3RWaWV3IHRoYXQgbWF0Y2hlcyB0aGUgbmV3IEFQSSBvZiBGbGF0TGlzdCwgYnV0IHdpdGhcbiAqIHNvbWUgc2VjdGlvbiBzdXBwb3J0IHRhY2tlZCBvbi4gSXQgaXMgcmVjb21tZW5kZWQgdG8ganVzdCB1c2UgRmxhdExpc3QgZGlyZWN0bHksIHRoaXMgY29tcG9uZW50XG4gKiBpcyBtb3N0bHkgZm9yIGRlYnVnZ2luZyBhbmQgcGVyZm9ybWFuY2UgY29tcGFyaXNvbi5cbiAqL1xuY2xhc3MgTWV0cm9MaXN0VmlldyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgJEZsb3dGaXhNZVN0YXRlPiB7XG4gIHNjcm9sbFRvRW5kKHBhcmFtcz86ID97YW5pbWF0ZWQ/OiA/Ym9vbGVhbn0pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Njcm9sbFRvRW5kIG5vdCBzdXBwb3J0ZWQgaW4gbGVnYWN5IExpc3RWaWV3LicpO1xuICB9XG4gIHNjcm9sbFRvSW5kZXgocGFyYW1zOiB7XG4gICAgYW5pbWF0ZWQ/OiA/Ym9vbGVhbixcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIHZpZXdQb3NpdGlvbj86IG51bWJlcixcbiAgfSkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2Nyb2xsVG9JbmRleCBub3Qgc3VwcG9ydGVkIGluIGxlZ2FjeSBMaXN0Vmlldy4nKTtcbiAgfVxuICBzY3JvbGxUb0l0ZW0ocGFyYW1zOiB7XG4gICAgYW5pbWF0ZWQ/OiA/Ym9vbGVhbixcbiAgICBpdGVtOiBJdGVtLFxuICAgIHZpZXdQb3NpdGlvbj86IG51bWJlcixcbiAgfSkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2Nyb2xsVG9JdGVtIG5vdCBzdXBwb3J0ZWQgaW4gbGVnYWN5IExpc3RWaWV3LicpO1xuICB9XG4gIHNjcm9sbFRvTG9jYXRpb24ocGFyYW1zOiB7XG4gICAgYW5pbWF0ZWQ/OiA/Ym9vbGVhbixcbiAgICBpdGVtSW5kZXg6IG51bWJlcixcbiAgICBzZWN0aW9uSW5kZXg6IG51bWJlcixcbiAgICB2aWV3T2Zmc2V0PzogbnVtYmVyLFxuICAgIHZpZXdQb3NpdGlvbj86IG51bWJlcixcbiAgfSkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2Nyb2xsVG9Mb2NhdGlvbiBub3Qgc3VwcG9ydGVkIGluIGxlZ2FjeSBMaXN0Vmlldy4nKTtcbiAgfVxuICBzY3JvbGxUb09mZnNldChwYXJhbXM6IHthbmltYXRlZD86ID9ib29sZWFuLCBvZmZzZXQ6IG51bWJlcn0pIHtcbiAgICBjb25zdCB7YW5pbWF0ZWQsIG9mZnNldH0gPSBwYXJhbXM7XG4gICAgdGhpcy5fbGlzdFJlZi5zY3JvbGxUbyhcbiAgICAgIHRoaXMucHJvcHMuaG9yaXpvbnRhbCA/IHt4OiBvZmZzZXQsIGFuaW1hdGVkfSA6IHt5OiBvZmZzZXQsIGFuaW1hdGVkfSxcbiAgICApO1xuICB9XG4gIGdldExpc3RSZWYoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpc3RSZWY7XG4gIH1cbiAgc2V0TmF0aXZlUHJvcHMocHJvcHM6IE9iamVjdCkge1xuICAgIGlmICh0aGlzLl9saXN0UmVmKSB7XG4gICAgICB0aGlzLl9saXN0UmVmLnNldE5hdGl2ZVByb3BzKHByb3BzKTtcbiAgICB9XG4gIH1cbiAgc3RhdGljIGRlZmF1bHRQcm9wczogRGVmYXVsdFByb3BzID0ge1xuICAgIGtleUV4dHJhY3RvcjogKGl0ZW0sIGluZGV4KSA9PiBpdGVtLmtleSB8fCBTdHJpbmcoaW5kZXgpLFxuICAgIHJlbmRlclNjcm9sbENvbXBvbmVudDogKHByb3BzOiBQcm9wcykgPT4ge1xuICAgICAgaWYgKHByb3BzLm9uUmVmcmVzaCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxTY3JvbGxWaWV3XG4gICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICByZWZyZXNoQ29udHJvbD17XG4gICAgICAgICAgICAgIC8qICRGbG93Rml4TWUoPj0wLjUzLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIscmVhY3RfbmF0aXZlX29zcylcbiAgICAgICAgICAgICAgICogVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW4gZXJyb3Igd2hlbiB1cGdyYWRpbmcgRmxvdydzIHN1cHBvcnRcbiAgICAgICAgICAgICAgICogZm9yIFJlYWN0LiBUbyBzZWUgdGhlIGVycm9yIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LlxuICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgPFJlZnJlc2hDb250cm9sXG4gICAgICAgICAgICAgICAgcmVmcmVzaGluZz17cHJvcHMucmVmcmVzaGluZ31cbiAgICAgICAgICAgICAgICBvblJlZnJlc2g9e3Byb3BzLm9uUmVmcmVzaH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDxTY3JvbGxWaWV3IHsuLi5wcm9wc30gLz47XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbiAgc3RhdGUgPSB0aGlzLl9jb21wdXRlU3RhdGUodGhpcy5wcm9wcywge1xuICAgIGRzOiBuZXcgTGlzdFZpZXcuRGF0YVNvdXJjZSh7XG4gICAgICByb3dIYXNDaGFuZ2VkOiAoaXRlbUEsIGl0ZW1CKSA9PiB0cnVlLFxuICAgICAgc2VjdGlvbkhlYWRlckhhc0NoYW5nZWQ6ICgpID0+IHRydWUsXG4gICAgICBnZXRTZWN0aW9uSGVhZGVyRGF0YTogKGRhdGFCbG9iLCBzZWN0aW9uSUQpID0+XG4gICAgICAgIHRoaXMuc3RhdGUuc2VjdGlvbkhlYWRlckRhdGFbc2VjdGlvbklEXSxcbiAgICB9KSxcbiAgICBzZWN0aW9uSGVhZGVyRGF0YToge30sXG4gIH0pO1xuICBVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXdQcm9wczogUHJvcHMpIHtcbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+IHRoaXMuX2NvbXB1dGVTdGF0ZShuZXdQcm9wcywgc3RhdGUpKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxMaXN0Vmlld1xuICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgZGF0YVNvdXJjZT17dGhpcy5zdGF0ZS5kc31cbiAgICAgICAgcmVmPXt0aGlzLl9jYXB0dXJlUmVmfVxuICAgICAgICByZW5kZXJSb3c9e3RoaXMuX3JlbmRlclJvd31cbiAgICAgICAgcmVuZGVyRm9vdGVyPXt0aGlzLnByb3BzLkZvb3RlckNvbXBvbmVudCAmJiB0aGlzLl9yZW5kZXJGb290ZXJ9XG4gICAgICAgIHJlbmRlclNlY3Rpb25IZWFkZXI9e3RoaXMucHJvcHMuc2VjdGlvbnMgJiYgdGhpcy5fcmVuZGVyU2VjdGlvbkhlYWRlcn1cbiAgICAgICAgcmVuZGVyU2VwYXJhdG9yPXt0aGlzLnByb3BzLlNlcGFyYXRvckNvbXBvbmVudCAmJiB0aGlzLl9yZW5kZXJTZXBhcmF0b3J9XG4gICAgICAvPlxuICAgICk7XG4gIH1cbiAgX2xpc3RSZWY6IExpc3RWaWV3O1xuICBfY2FwdHVyZVJlZiA9IHJlZiA9PiB7XG4gICAgdGhpcy5fbGlzdFJlZiA9IHJlZjtcbiAgfTtcbiAgX2NvbXB1dGVTdGF0ZShwcm9wczogUHJvcHMsIHN0YXRlKSB7XG4gICAgY29uc3Qgc2VjdGlvbkhlYWRlckRhdGEgPSB7fTtcbiAgICBpZiAocHJvcHMuc2VjdGlvbnMpIHtcbiAgICAgIGludmFyaWFudCghcHJvcHMuaXRlbXMsICdDYW5ub3QgaGF2ZSBib3RoIHNlY3Rpb25zIGFuZCBpdGVtcyBwcm9wcy4nKTtcbiAgICAgIGNvbnN0IHNlY3Rpb25zID0ge307XG4gICAgICBwcm9wcy5zZWN0aW9ucy5mb3JFYWNoKChzZWN0aW9uSW4sIGlpKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb25JRCA9ICdzJyArIGlpO1xuICAgICAgICBzZWN0aW9uc1tzZWN0aW9uSURdID0gc2VjdGlvbkluLmRhdGE7XG4gICAgICAgIHNlY3Rpb25IZWFkZXJEYXRhW3NlY3Rpb25JRF0gPSBzZWN0aW9uSW47XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRzOiBzdGF0ZS5kcy5jbG9uZVdpdGhSb3dzQW5kU2VjdGlvbnMoc2VjdGlvbnMpLFxuICAgICAgICBzZWN0aW9uSGVhZGVyRGF0YSxcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGludmFyaWFudCghcHJvcHMuc2VjdGlvbnMsICdDYW5ub3QgaGF2ZSBib3RoIHNlY3Rpb25zIGFuZCBpdGVtcyBwcm9wcy4nKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRzOiBzdGF0ZS5kcy5jbG9uZVdpdGhSb3dzKHByb3BzLml0ZW1zKSxcbiAgICAgICAgc2VjdGlvbkhlYWRlckRhdGEsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICAvKiAkRmxvd0ZpeE1lKD49MC41My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiLHJlYWN0X25hdGl2ZV9vc3MpIFRoaXMgY29tbWVudFxuICAgKiBzdXBwcmVzc2VzIGFuIGVycm9yIHdoZW4gdXBncmFkaW5nIEZsb3cncyBzdXBwb3J0IGZvciBSZWFjdC4gVG8gc2VlIHRoZVxuICAgKiBlcnJvciBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgX3JlbmRlckZvb3RlciA9ICgpID0+IDx0aGlzLnByb3BzLkZvb3RlckNvbXBvbmVudCBrZXk9XCIkZm9vdGVyXCIgLz47XG4gIF9yZW5kZXJSb3cgPSAoaXRlbSwgc2VjdGlvbklELCByb3dJRCwgaGlnaGxpZ2h0Um93KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMucmVuZGVySXRlbSh7aXRlbSwgaW5kZXg6IHJvd0lEfSk7XG4gIH07XG4gIF9yZW5kZXJTZWN0aW9uSGVhZGVyID0gKHNlY3Rpb24sIHNlY3Rpb25JRCkgPT4ge1xuICAgIGNvbnN0IHtyZW5kZXJTZWN0aW9uSGVhZGVyfSA9IHRoaXMucHJvcHM7XG4gICAgaW52YXJpYW50KFxuICAgICAgcmVuZGVyU2VjdGlvbkhlYWRlcixcbiAgICAgICdNdXN0IHByb3ZpZGUgcmVuZGVyU2VjdGlvbkhlYWRlciB3aXRoIHNlY3Rpb25zIHByb3AnLFxuICAgICk7XG4gICAgcmV0dXJuIHJlbmRlclNlY3Rpb25IZWFkZXIoe3NlY3Rpb259KTtcbiAgfTtcbiAgX3JlbmRlclNlcGFyYXRvciA9IChzSUQsIHJJRCkgPT4gKFxuICAgIC8qICRGbG93Rml4TWUoPj0wLjUzLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIscmVhY3RfbmF0aXZlX29zcykgVGhpcyBjb21tZW50XG4gICAgICogc3VwcHJlc3NlcyBhbiBlcnJvciB3aGVuIHVwZ3JhZGluZyBGbG93J3Mgc3VwcG9ydCBmb3IgUmVhY3QuIFRvIHNlZSB0aGVcbiAgICAgKiBlcnJvciBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICA8dGhpcy5wcm9wcy5TZXBhcmF0b3JDb21wb25lbnQga2V5PXtzSUQgKyBySUR9IC8+XG4gICk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWV0cm9MaXN0VmlldztcbiJdfQ==