8ad21d2b1fca69ac8eb6067961850d56
Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require('react-native');var _jwtDecode=require('jwt-decode');var _jwtDecode2=_interopRequireDefault(_jwtDecode);var _Const=require('./TabNavigator/const/Const.js');var _expo=require('expo');var _expo2=_interopRequireDefault(_expo);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var tk;function register(){var _ref,status,value;return regeneratorRuntime.async(function register$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_expo2.default.Permissions.askAsync(_expo2.default.Permissions.NOTIFICATIONS));case 2:_ref=_context.sent;status=_ref.status;if(!(status!='granted')){_context.next=7;break;}alert('You need to enable permissions in settings');return _context.abrupt('return');case 7:_context.next=9;return regeneratorRuntime.awrap(_expo2.default.Notifications.getExpoPushTokenAsync());case 9:value=_context.sent;tk=value;console.log(status,value);case 12:case'end':return _context.stop();}}},null,this);}var Feed=function(_React$Component){_inherits(Feed,_React$Component);_createClass(Feed,[{key:'componentWillMount',value:function componentWillMount(){register();this.listener=_expo2.default.Notifications.addListener(this.listen);}},{key:'componentWillUnmount',value:function componentWillUnmount(){this.listener&&_expo2.default.Notifications.addListener(this.listen);}}]);function Feed(props){_classCallCheck(this,Feed);var _this=_possibleConstructorReturn(this,(Feed.__proto__||Object.getPrototypeOf(Feed)).call(this,props));_this.listen=function(_ref2){var origin=_ref2.origin,data=_ref2.data;console.log('cool data',origin,data);};_this._onRefresh=function(){_this.setState({refreshing:true});_this.componentDidMount().then(function(){_this.setState({refreshing:false});});};_this.state={refreshing:false};return _this;}_createClass(Feed,[{key:'componentDidMount',value:function componentDidMount(){var _this2=this;var state,token,notification;return regeneratorRuntime.async(function componentDidMount$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:state=this.props.navigation.state;token=state.params?state.params.token:undefined;console.log(token);user=(0,_jwtDecode2.default)(token);console.log(token);notification=JSON.stringify({id_token:user.user_id,notification_token:tk});console.log(notification);fetch(_Const.PROFILE_API+'/set_token/',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:notification}).then(function(response){return response.json();}).then(function(jsonResponse){console.log(jsonResponse);}).catch(function(error){console.log(error);});return _context2.abrupt('return',fetch(_Const.NOTIFICATIONS_API+'/emergencynotifications/').then(function(response){return response.json();}).then(function(responseJson){_this2.setState({isLoading:false,dataSource:responseJson},function(){});}).catch(function(error){console.error(error);}));case 9:case'end':return _context2.stop();}}},null,this);}},{key:'render',value:function render(){return _react2.default.createElement(_reactNative.ScrollView,{style:styles.item,refreshControl:_react2.default.createElement(_reactNative.RefreshControl,{refreshing:this.state.refreshing,onRefresh:this._onRefresh})},_react2.default.createElement(_reactNative.FlatList,{data:this.state.dataSource,renderItem:function renderItem(_ref3){var item=_ref3.item;return _react2.default.createElement(_reactNative.View,{style:styles.item2},_react2.default.createElement(_reactNative.Text,{style:styles.text1},item.title),_react2.default.createElement(_reactNative.Image,{source:{uri:item.image},style:{width:400,height:200}}),_react2.default.createElement(_reactNative.Text,{style:styles.text},item.message));},keyExtractor:function keyExtractor(_ref4,index){var id=_ref4.id;return id;}}));}}]);return Feed;}(_react2.default.Component);exports.default=Feed;var styles=_reactNative.StyleSheet.create({item:{backgroundColor:"#ffffff",margin:4,shadowColor:"#000000",shadowOpacity:0.8,shadowRadius:2,shadowOffset:{height:1,width:1},elevation:4},item2:{alignItems:"center",justifyContent:'center',backgroundColor:"#ffffff",flexGrow:1,margin:4,padding:20,borderRadius:10,shadowColor:"#000000",shadowOpacity:0.8,shadowRadius:2,shadowOffset:{height:1,width:1},elevation:4},text:{color:"#540b71",fontWeight:'100'},text1:{color:"#540b71",fontWeight:'bold'}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZlZWQuanMiXSwibmFtZXMiOlsidGsiLCJyZWdpc3RlciIsIkV4cG8iLCJQZXJtaXNzaW9ucyIsImFza0FzeW5jIiwiTk9USUZJQ0FUSU9OUyIsInN0YXR1cyIsImFsZXJ0IiwiTm90aWZpY2F0aW9ucyIsImdldEV4cG9QdXNoVG9rZW5Bc3luYyIsInZhbHVlIiwiY29uc29sZSIsImxvZyIsIkZlZWQiLCJsaXN0ZW5lciIsImFkZExpc3RlbmVyIiwibGlzdGVuIiwicHJvcHMiLCJvcmlnaW4iLCJkYXRhIiwiX29uUmVmcmVzaCIsInNldFN0YXRlIiwicmVmcmVzaGluZyIsImNvbXBvbmVudERpZE1vdW50IiwidGhlbiIsInN0YXRlIiwibmF2aWdhdGlvbiIsInRva2VuIiwicGFyYW1zIiwidW5kZWZpbmVkIiwidXNlciIsIm5vdGlmaWNhdGlvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJpZF90b2tlbiIsInVzZXJfaWQiLCJub3RpZmljYXRpb25fdG9rZW4iLCJmZXRjaCIsIlBST0ZJTEVfQVBJIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJyZXNwb25zZSIsImpzb24iLCJqc29uUmVzcG9uc2UiLCJjYXRjaCIsImVycm9yIiwiTk9USUZJQ0FUSU9OU19BUEkiLCJyZXNwb25zZUpzb24iLCJpc0xvYWRpbmciLCJkYXRhU291cmNlIiwic3R5bGVzIiwiaXRlbSIsIml0ZW0yIiwidGV4dDEiLCJ0aXRsZSIsInVyaSIsImltYWdlIiwid2lkdGgiLCJoZWlnaHQiLCJ0ZXh0IiwibWVzc2FnZSIsImluZGV4IiwiaWQiLCJSZWFjdCIsIkNvbXBvbmVudCIsIlN0eWxlU2hlZXQiLCJjcmVhdGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJtYXJnaW4iLCJzaGFkb3dDb2xvciIsInNoYWRvd09wYWNpdHkiLCJzaGFkb3dSYWRpdXMiLCJzaGFkb3dPZmZzZXQiLCJlbGV2YXRpb24iLCJhbGlnbkl0ZW1zIiwianVzdGlmeUNvbnRlbnQiLCJmbGV4R3JvdyIsInBhZGRpbmci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YS9CckIsTUFBTyxDQUNMc0IsV0FBWSxRQURQLENBRUxDLGVBQWdCLFFBRlgsQ0FHTFIsZ0JBQWlCLFNBSFosQ0FJTFMsU0FBVSxDQUpMLENBS0xSLE9BQVEsQ0FMSCxDQU1MUyxRQUFTLEVBTkosQ0FPTEMsYUFBYyxFQVBULENBUUxULFlBQWEsU0FSUixDQVNMQyxjQUFlLEdBVFYsQ0FVTEMsYUFBYyxDQVZULENBV0xDLGFBQWMsQ0FDWmQsT0FBUSxDQURJLENBRVpELE1BQU8sQ0FGSyxDQVhULENBZUxnQixVQUFXLENBZk4sQ0Fid0IsQ0E4Qi9CZCxLQUFNLENBQ0pvQixNQUFPLFNBREgsQ0FFSkMsV0FBWSxLQUZSLENBOUJ5QixDQWtDL0IzQixNQUFPLENBQ0wwQixNQUFPLFNBREYsQ0FFTEMsV0FBWSxNQUZQLENBbEN3QixDQUFsQixDQUFmIiwiZmlsZSI6IkZlZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRmxhdExpc3QsIFRleHQsIFZpZXcsIFN0eWxlU2hlZXQsIFNjcm9sbFZpZXcsIFJlZnJlc2hDb250cm9sLCBJbWFnZSB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQgand0X2RlY29kZSBmcm9tICdqd3QtZGVjb2RlJztcbmltcG9ydCB7IE5PVElGSUNBVElPTlNfQVBJLCBQUk9GSUxFX0FQSSB9IGZyb20gJy4vVGFiTmF2aWdhdG9yL2NvbnN0L0NvbnN0LmpzJ1xuaW1wb3J0IEV4cG8gZnJvbSAnZXhwbydcbnZhciB0a1xuXG5hc3luYyBmdW5jdGlvbiByZWdpc3RlcigpIHtcbiAgY29uc3QgeyBzdGF0dXMgfSA9IGF3YWl0IEV4cG8uUGVybWlzc2lvbnMuYXNrQXN5bmMoXG4gICAgRXhwby5QZXJtaXNzaW9ucy5OT1RJRklDQVRJT05TXG4gICk7XG4gIGlmIChzdGF0dXMgIT0gJ2dyYW50ZWQnKSB7XG4gICAgYWxlcnQoJ1lvdSBuZWVkIHRvIGVuYWJsZSBwZXJtaXNzaW9ucyBpbiBzZXR0aW5ncycpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHZhbHVlID0gYXdhaXQgRXhwby5Ob3RpZmljYXRpb25zLmdldEV4cG9QdXNoVG9rZW5Bc3luYygpO1xuICB0ayA9IHZhbHVlO1xuICBjb25zb2xlLmxvZyhzdGF0dXMsIHZhbHVlKTtcbiAgXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZlZWQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgcmVnaXN0ZXIoKTtcbiAgICB0aGlzLmxpc3RlbmVyID0gRXhwby5Ob3RpZmljYXRpb25zLmFkZExpc3RlbmVyKHRoaXMubGlzdGVuKTtcbiAgfVxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLmxpc3RlbmVyICYmIEV4cG8uTm90aWZpY2F0aW9ucy5hZGRMaXN0ZW5lcih0aGlzLmxpc3Rlbik7XG4gIH1cblxuICBsaXN0ZW4gPSAoeyBvcmlnaW4sIGRhdGEgfSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdjb29sIGRhdGEnLCBvcmlnaW4sIGRhdGEpO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHsgcmVmcmVzaGluZzogZmFsc2UsIH1cbiAgfVxuXG4gIGFzeW5jIGNvbXBvbmVudERpZE1vdW50KCkge1xuXG4gICAgY29uc3Qge3N0YXRlfSA9IHRoaXMucHJvcHMubmF2aWdhdGlvbjtcbiAgICB2YXIgdG9rZW4gPSBzdGF0ZS5wYXJhbXMgPyBzdGF0ZS5wYXJhbXMudG9rZW4gOiB1bmRlZmluZWQ7XG4gICAgY29uc29sZS5sb2codG9rZW4pXG4gICAgdXNlciA9IGp3dF9kZWNvZGUodG9rZW4pXG4gICAgICBcbiAgICBjb25zb2xlLmxvZyh0b2tlbilcbiAgICBsZXQgbm90aWZpY2F0aW9uID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgaWRfdG9rZW46IHVzZXIudXNlcl9pZCxcbiAgICAgIG5vdGlmaWNhdGlvbl90b2tlbjogdGssXG4gICAgfSlcbiAgICBjb25zb2xlLmxvZyhub3RpZmljYXRpb24pO1xuICAgIGZldGNoKFBST0ZJTEVfQVBJICsgJy9zZXRfdG9rZW4vJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogbm90aWZpY2F0aW9uXG4gICAgfSkudGhlbihyZXNwb25zZSA9PiB7IHJldHVybiByZXNwb25zZS5qc29uKCkgfVxuICAgICkudGhlbihqc29uUmVzcG9uc2UgPT4ge1xuICAgICAgY29uc29sZS5sb2coanNvblJlc3BvbnNlKTtcbiAgICB9XG4gICAgKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICB9KVxuXG4gICAgcmV0dXJuIGZldGNoKE5PVElGSUNBVElPTlNfQVBJICsgJy9lbWVyZ2VuY3lub3RpZmljYXRpb25zLycpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXNwb25zZUpzb24pID0+IHtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgIGRhdGFTb3VyY2U6IHJlc3BvbnNlSnNvbixcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIH0pO1xuXG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgX29uUmVmcmVzaCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgcmVmcmVzaGluZzogdHJ1ZSB9KTtcbiAgICB0aGlzLmNvbXBvbmVudERpZE1vdW50KCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgcmVmcmVzaGluZzogZmFsc2UgfSk7XG4gICAgfSk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8U2Nyb2xsVmlldyBzdHlsZT17c3R5bGVzLml0ZW19XG4gICAgICAgIHJlZnJlc2hDb250cm9sPXtcbiAgICAgICAgICA8UmVmcmVzaENvbnRyb2xcbiAgICAgICAgICAgIHJlZnJlc2hpbmc9e3RoaXMuc3RhdGUucmVmcmVzaGluZ31cbiAgICAgICAgICAgIG9uUmVmcmVzaD17dGhpcy5fb25SZWZyZXNofVxuICAgICAgICAgIC8+XG4gICAgICAgIH1cbiAgICAgID5cbiAgICAgICAgPEZsYXRMaXN0XG4gICAgICAgICAgZGF0YT17dGhpcy5zdGF0ZS5kYXRhU291cmNlfVxuICAgICAgICAgIHJlbmRlckl0ZW09eyh7IGl0ZW0gfSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5pdGVtMn0+XG4gICAgICAgICAgICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy50ZXh0MX0+e2l0ZW0udGl0bGV9PC9UZXh0PlxuICAgICAgICAgICAgICAgIDxJbWFnZSBzb3VyY2U9e3t1cmk6aXRlbS5pbWFnZX19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiA0MDAsIGhlaWdodDogMjAwfX0gLz5cbiAgICAgICAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLnRleHR9PntpdGVtLm1lc3NhZ2V9PC9UZXh0PlxuICAgICAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH19XG4gICAgICAgICAga2V5RXh0cmFjdG9yPXsoeyBpZCB9LCBpbmRleCkgPT4gaWR9XG5cbiAgICAgICAgLz5cbiAgICAgIDwvU2Nyb2xsVmlldz5cbiAgICApO1xuICB9XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgaXRlbToge1xuICAgIGJhY2tncm91bmRDb2xvcjogXCIjZmZmZmZmXCIsXG4gICAgbWFyZ2luOiA0LFxuICAgIHNoYWRvd0NvbG9yOiBcIiMwMDAwMDBcIixcbiAgICBzaGFkb3dPcGFjaXR5OiAwLjgsXG4gICAgc2hhZG93UmFkaXVzOiAyLFxuICAgIHNoYWRvd09mZnNldDoge1xuICAgICAgaGVpZ2h0OiAxLFxuICAgICAgd2lkdGg6IDFcbiAgICB9LFxuICAgIGVsZXZhdGlvbjogNFxuICB9LFxuICBpdGVtMjoge1xuICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIGJhY2tncm91bmRDb2xvcjogXCIjZmZmZmZmXCIsXG4gICAgZmxleEdyb3c6IDEsXG4gICAgbWFyZ2luOiA0LFxuICAgIHBhZGRpbmc6IDIwLFxuICAgIGJvcmRlclJhZGl1czogMTAsXG4gICAgc2hhZG93Q29sb3I6IFwiIzAwMDAwMFwiLFxuICAgIHNoYWRvd09wYWNpdHk6IDAuOCxcbiAgICBzaGFkb3dSYWRpdXM6IDIsXG4gICAgc2hhZG93T2Zmc2V0OiB7XG4gICAgICBoZWlnaHQ6IDEsXG4gICAgICB3aWR0aDogMVxuICAgIH0sXG4gICAgZWxldmF0aW9uOiA0XG4gIH0sXG4gIHRleHQ6IHtcbiAgICBjb2xvcjogXCIjNTQwYjcxXCIsXG4gICAgZm9udFdlaWdodDogJzEwMCdcbiAgfSxcbiAgdGV4dDE6IHtcbiAgICBjb2xvcjogXCIjNTQwYjcxXCIsXG4gICAgZm9udFdlaWdodDogJ2JvbGQnLFxuICB9XG59KTtcbiJdfQ==